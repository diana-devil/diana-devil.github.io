<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>README | 凉冰的手记</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/192.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#2196f3">
    <meta name="description" content="记录生活的精彩瞬间，记录一个程序猿的成长！">
    <meta name="keywords" content="琐事，小记">
    <meta name="author" href="凉冰">
    <meta name="theme-color" content="#2196f3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.59ed400b.css" as="style"><link rel="preload" href="/assets/js/app.3ee2b30c.js" as="script"><link rel="preload" href="/assets/js/2.fc657b59.js" as="script"><link rel="preload" href="/assets/js/143.ad7b5934.js" as="script"><link rel="preload" href="/assets/js/3.e0ec9727.js" as="script"><link rel="prefetch" href="/assets/js/10.eb4f1714.js"><link rel="prefetch" href="/assets/js/100.60572966.js"><link rel="prefetch" href="/assets/js/101.d94775a6.js"><link rel="prefetch" href="/assets/js/102.354c87f2.js"><link rel="prefetch" href="/assets/js/103.0322d8d3.js"><link rel="prefetch" href="/assets/js/104.330ce470.js"><link rel="prefetch" href="/assets/js/105.f2c0cf7b.js"><link rel="prefetch" href="/assets/js/106.9b15e481.js"><link rel="prefetch" href="/assets/js/107.f83846c8.js"><link rel="prefetch" href="/assets/js/108.fd868043.js"><link rel="prefetch" href="/assets/js/109.144984d2.js"><link rel="prefetch" href="/assets/js/11.1f4ed2b0.js"><link rel="prefetch" href="/assets/js/110.393075aa.js"><link rel="prefetch" href="/assets/js/111.8e2be411.js"><link rel="prefetch" href="/assets/js/112.f5db1301.js"><link rel="prefetch" href="/assets/js/113.c5a49956.js"><link rel="prefetch" href="/assets/js/114.f7400c29.js"><link rel="prefetch" href="/assets/js/115.0d4d9691.js"><link rel="prefetch" href="/assets/js/116.5e2d0bba.js"><link rel="prefetch" href="/assets/js/117.b9b6cd5c.js"><link rel="prefetch" href="/assets/js/118.cfffe6ca.js"><link rel="prefetch" href="/assets/js/119.faeb006b.js"><link rel="prefetch" href="/assets/js/12.c55c2945.js"><link rel="prefetch" href="/assets/js/120.2c87041a.js"><link rel="prefetch" href="/assets/js/121.6d6d525b.js"><link rel="prefetch" href="/assets/js/122.a378a709.js"><link rel="prefetch" href="/assets/js/123.8a44d7e0.js"><link rel="prefetch" href="/assets/js/124.eef03f70.js"><link rel="prefetch" href="/assets/js/125.20627b3b.js"><link rel="prefetch" href="/assets/js/126.02bdd70b.js"><link rel="prefetch" href="/assets/js/127.6aaf85c7.js"><link rel="prefetch" href="/assets/js/128.2f2f6b78.js"><link rel="prefetch" href="/assets/js/129.b1f7d667.js"><link rel="prefetch" href="/assets/js/13.b5382928.js"><link rel="prefetch" href="/assets/js/130.aadb5b72.js"><link rel="prefetch" href="/assets/js/131.0a0ad3b4.js"><link rel="prefetch" href="/assets/js/132.a05a0c00.js"><link rel="prefetch" href="/assets/js/133.584b8785.js"><link rel="prefetch" href="/assets/js/134.ab61764f.js"><link rel="prefetch" href="/assets/js/135.ccae4853.js"><link rel="prefetch" href="/assets/js/136.38fdaa61.js"><link rel="prefetch" href="/assets/js/137.502d74c0.js"><link rel="prefetch" href="/assets/js/138.12a12ee7.js"><link rel="prefetch" href="/assets/js/139.5ed042c0.js"><link rel="prefetch" href="/assets/js/14.9bf49d25.js"><link rel="prefetch" href="/assets/js/140.32ffb0bc.js"><link rel="prefetch" href="/assets/js/141.3b99bc3f.js"><link rel="prefetch" href="/assets/js/142.afd3e1e7.js"><link rel="prefetch" href="/assets/js/144.7bdbdbd9.js"><link rel="prefetch" href="/assets/js/145.3f68756b.js"><link rel="prefetch" href="/assets/js/146.a48f80c3.js"><link rel="prefetch" href="/assets/js/147.eb3a30a3.js"><link rel="prefetch" href="/assets/js/148.563f4279.js"><link rel="prefetch" href="/assets/js/149.7627333e.js"><link rel="prefetch" href="/assets/js/15.47e2fe44.js"><link rel="prefetch" href="/assets/js/150.7cf4b6fd.js"><link rel="prefetch" href="/assets/js/151.200e2d36.js"><link rel="prefetch" href="/assets/js/152.68d5a6f8.js"><link rel="prefetch" href="/assets/js/153.4019d1b1.js"><link rel="prefetch" href="/assets/js/154.7c56b873.js"><link rel="prefetch" href="/assets/js/155.8a895428.js"><link rel="prefetch" href="/assets/js/156.9a106f9c.js"><link rel="prefetch" href="/assets/js/157.b585e3f5.js"><link rel="prefetch" href="/assets/js/158.a9ffbcc1.js"><link rel="prefetch" href="/assets/js/159.9bd41101.js"><link rel="prefetch" href="/assets/js/16.709e62a0.js"><link rel="prefetch" href="/assets/js/17.b149e3eb.js"><link rel="prefetch" href="/assets/js/18.5b57a250.js"><link rel="prefetch" href="/assets/js/19.d2aedd09.js"><link rel="prefetch" href="/assets/js/20.13fd637f.js"><link rel="prefetch" href="/assets/js/21.91dc71fa.js"><link rel="prefetch" href="/assets/js/22.b44ebaaf.js"><link rel="prefetch" href="/assets/js/23.85274bf7.js"><link rel="prefetch" href="/assets/js/24.fdcf9dad.js"><link rel="prefetch" href="/assets/js/25.d7834455.js"><link rel="prefetch" href="/assets/js/26.149bb0bb.js"><link rel="prefetch" href="/assets/js/27.fe47c303.js"><link rel="prefetch" href="/assets/js/28.106a053b.js"><link rel="prefetch" href="/assets/js/29.5cbd445a.js"><link rel="prefetch" href="/assets/js/30.bc8be6db.js"><link rel="prefetch" href="/assets/js/31.776bb22e.js"><link rel="prefetch" href="/assets/js/32.38f1617c.js"><link rel="prefetch" href="/assets/js/33.764d5e8e.js"><link rel="prefetch" href="/assets/js/34.ee4b3664.js"><link rel="prefetch" href="/assets/js/35.0c8a4552.js"><link rel="prefetch" href="/assets/js/36.3114f265.js"><link rel="prefetch" href="/assets/js/37.6623c809.js"><link rel="prefetch" href="/assets/js/38.47b2ae3c.js"><link rel="prefetch" href="/assets/js/39.66477360.js"><link rel="prefetch" href="/assets/js/4.7bd8ec5a.js"><link rel="prefetch" href="/assets/js/40.3c1369b3.js"><link rel="prefetch" href="/assets/js/41.ba422769.js"><link rel="prefetch" href="/assets/js/42.d8feaaee.js"><link rel="prefetch" href="/assets/js/43.7a023784.js"><link rel="prefetch" href="/assets/js/44.578065d4.js"><link rel="prefetch" href="/assets/js/45.599d10a9.js"><link rel="prefetch" href="/assets/js/46.68c58a57.js"><link rel="prefetch" href="/assets/js/47.a0e48134.js"><link rel="prefetch" href="/assets/js/48.a8edc4f3.js"><link rel="prefetch" href="/assets/js/49.a98d9884.js"><link rel="prefetch" href="/assets/js/5.bc317ee9.js"><link rel="prefetch" href="/assets/js/50.7001c5b8.js"><link rel="prefetch" href="/assets/js/51.43d17700.js"><link rel="prefetch" href="/assets/js/52.9ad031a9.js"><link rel="prefetch" href="/assets/js/53.8347b740.js"><link rel="prefetch" href="/assets/js/54.73a1db12.js"><link rel="prefetch" href="/assets/js/55.06ac4334.js"><link rel="prefetch" href="/assets/js/56.caf42a7a.js"><link rel="prefetch" href="/assets/js/57.c8af04ff.js"><link rel="prefetch" href="/assets/js/58.259c0df6.js"><link rel="prefetch" href="/assets/js/59.4a73da6e.js"><link rel="prefetch" href="/assets/js/6.da0024ba.js"><link rel="prefetch" href="/assets/js/60.c88072d5.js"><link rel="prefetch" href="/assets/js/61.a3a06ae4.js"><link rel="prefetch" href="/assets/js/62.e5adc7b0.js"><link rel="prefetch" href="/assets/js/63.48cc1305.js"><link rel="prefetch" href="/assets/js/64.86f8647c.js"><link rel="prefetch" href="/assets/js/65.005e380e.js"><link rel="prefetch" href="/assets/js/66.67bff065.js"><link rel="prefetch" href="/assets/js/67.e12b4c13.js"><link rel="prefetch" href="/assets/js/68.0161e8c6.js"><link rel="prefetch" href="/assets/js/69.5aaf7b82.js"><link rel="prefetch" href="/assets/js/7.1d00dc1d.js"><link rel="prefetch" href="/assets/js/70.6a645155.js"><link rel="prefetch" href="/assets/js/71.001a3225.js"><link rel="prefetch" href="/assets/js/72.2850a293.js"><link rel="prefetch" href="/assets/js/73.d250e0c6.js"><link rel="prefetch" href="/assets/js/74.dafa5bc3.js"><link rel="prefetch" href="/assets/js/75.22c6b92e.js"><link rel="prefetch" href="/assets/js/76.24bc0a51.js"><link rel="prefetch" href="/assets/js/77.e38213b8.js"><link rel="prefetch" href="/assets/js/78.a22de10e.js"><link rel="prefetch" href="/assets/js/79.b0e7fed2.js"><link rel="prefetch" href="/assets/js/8.b16448cb.js"><link rel="prefetch" href="/assets/js/80.67472401.js"><link rel="prefetch" href="/assets/js/81.1df69f3e.js"><link rel="prefetch" href="/assets/js/82.022c9317.js"><link rel="prefetch" href="/assets/js/83.8894e626.js"><link rel="prefetch" href="/assets/js/84.e9f038d8.js"><link rel="prefetch" href="/assets/js/85.ff3971f7.js"><link rel="prefetch" href="/assets/js/86.24e53411.js"><link rel="prefetch" href="/assets/js/87.95b56dc2.js"><link rel="prefetch" href="/assets/js/88.4557cc7d.js"><link rel="prefetch" href="/assets/js/89.1337890b.js"><link rel="prefetch" href="/assets/js/9.1b8d4154.js"><link rel="prefetch" href="/assets/js/90.29d24983.js"><link rel="prefetch" href="/assets/js/91.84b2e3eb.js"><link rel="prefetch" href="/assets/js/92.23e2abeb.js"><link rel="prefetch" href="/assets/js/93.162e9b76.js"><link rel="prefetch" href="/assets/js/94.9ada79ba.js"><link rel="prefetch" href="/assets/js/95.5cc24e13.js"><link rel="prefetch" href="/assets/js/96.0ee67f9e.js"><link rel="prefetch" href="/assets/js/97.9f98bf38.js"><link rel="prefetch" href="/assets/js/98.58600000.js"><link rel="prefetch" href="/assets/js/99.f8a36889.js">
    <link rel="stylesheet" href="/assets/css/0.styles.59ed400b.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/恶魔.webp" alt="凉冰的手记" class="logo"> <span class="site-name can-hide">凉冰的手记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/Java-C/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/back/javaWeb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/back/sql/" class="nav-link">数据库</a></li><li class="dropdown-item"><!----> <a href="/back/SSM/" class="nav-link">SSM</a></li><li class="dropdown-item"><!----> <a href="/back/SpringBoot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/back/Microservice/" class="nav-link">微服务</a></li></ul></div></div><div class="nav-item"><a href="/Algorithm/" class="nav-link">算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology/Git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/technology/Linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/pages/b5d182/" aria-current="page" class="nav-link router-link-exact-active router-link-active">正则表达式</a></li></ul></div></div><div class="nav-item"><a href="/pages/edb686/" class="nav-link">面试</a></div><div class="nav-item"><a href="/pages/2aa63b/" class="nav-link">项目记录</a></div><div class="nav-item"><a href="/pages/1b70fb/" class="nav-link">DOA</a></div><div class="nav-item"><a href="/pages/d591da/" class="nav-link">精彩瞬间</a></div><div class="nav-item"><a href="/pages/961a83/" class="nav-link">任意门</a></div><div class="nav-item"><a href="https://github.com/diana-devil/diana-devil.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/devil.jpg"> <div class="blogger-info"><h3>凉冰</h3> <span>奋勇向前的可爱小恶魔！</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/Java-C/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/back/javaWeb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/back/sql/" class="nav-link">数据库</a></li><li class="dropdown-item"><!----> <a href="/back/SSM/" class="nav-link">SSM</a></li><li class="dropdown-item"><!----> <a href="/back/SpringBoot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/back/Microservice/" class="nav-link">微服务</a></li></ul></div></div><div class="nav-item"><a href="/Algorithm/" class="nav-link">算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology/Git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/technology/Linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/pages/b5d182/" aria-current="page" class="nav-link router-link-exact-active router-link-active">正则表达式</a></li></ul></div></div><div class="nav-item"><a href="/pages/edb686/" class="nav-link">面试</a></div><div class="nav-item"><a href="/pages/2aa63b/" class="nav-link">项目记录</a></div><div class="nav-item"><a href="/pages/1b70fb/" class="nav-link">DOA</a></div><div class="nav-item"><a href="/pages/d591da/" class="nav-link">精彩瞬间</a></div><div class="nav-item"><a href="/pages/961a83/" class="nav-link">任意门</a></div><div class="nav-item"><a href="https://github.com/diana-devil/diana-devil.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>正则表达式</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/b5d182/" aria-current="page" class="active sidebar-link">README</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#克制" class="sidebar-link">克制</a></li><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#元字符的分类" class="sidebar-link">元字符的分类</a></li><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#正则三种模式" class="sidebar-link">正则三种模式</a></li><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#分组与引用" class="sidebar-link">分组与引用</a></li><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#匹配模式" class="sidebar-link">匹配模式</a></li><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#转义" class="sidebar-link">转义</a></li><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#正则流派" class="sidebar-link">正则流派</a></li><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#正则应用" class="sidebar-link">正则应用</a></li><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#原理" class="sidebar-link">原理</a></li><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#正则解决常见问题" class="sidebar-link">正则解决常见问题</a></li><li class="sidebar-sub-header level2"><a href="/pages/b5d182/#从编程语言的角度来理解正则表达式" class="sidebar-link">从编程语言的角度来理解正则表达式</a></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E6%8A%80%E6%9C%AF" title="分类" data-v-06225672>技术</a></li><li data-v-06225672><a href="/categories/?category=%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F" title="分类" data-v-06225672>正则表达式</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/diana-devil" target="_blank" title="作者" class="beLink" data-v-06225672>凉冰</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-06-30</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">README<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h1> <h2 id="克制"><a href="#克制" class="header-anchor">#</a> 克制</h2> <p>那到底该怎么“克制”呢？我的经验有以下三点。</p> <blockquote><p>​	**第⼀，能用普通字符串处理的，坚决⽤普通字符串处理。**字符串处理的速度不见得差，可读性却好上很多。如果要在大段文本中定位所有的 today 或者 tomorrow，用最简单的字符串查找，直接找两遍，明显比 to(day|morrow) 看起来更清楚。</p></blockquote> <blockquote><p>​	**第⼆，能写注释的正则表达式，⼀定要写注释。**正则表达式的语法非常古老，不够直观，为了便于阅读和维护，如今大部分语言里都可以通过 x 打开注释模式。有了注释，复杂正则表达式的结构也能一目了然。</p></blockquote> <blockquote><p>​	**第三，能用多个简单正则表达式解决的，⼀定不要苛求用一个复杂的正则表达式。**这里最明显的例子就是输入条件的验证。比如说，常见的密码要求“必须包含数字、小写字母、大写字母、特殊符号中的至少两种，且长度在 8 到 16 之间”。</p> <p>​	你当然可以绞尽脑汁用一个正则表达式来验证，但如果放下执念，⽤多个正则表达式分别验证“包含数字”“包含小写字母”“包含大写字母”“包含特殊符号”这四个条件，要求验证成功结果数大于等于 2，再配合一个正则表达式验证长度，这样做也是可行的。虽然看起来繁琐，但可维护性绝对远远强于单个正则表达式。</p></blockquote> <h2 id="元字符的分类"><a href="#元字符的分类" class="header-anchor">#</a> 元字符的分类</h2> <p><strong>所谓元字符就是指 那些 在正则表达式中具有特殊意义的专用字符</strong>，正则就是由一系列的元字符组成</p> <h4 id="特殊单字符"><a href="#特殊单字符" class="header-anchor">#</a> 特殊单字符</h4> <ul><li><code>.</code>——任意字符(换行除外)</li> <li><code>\d</code>——任意数字                                      <code>\D</code>——任意非数字</li> <li><code>\w</code>—— 任意字母，数字，下划线           <code>\W</code>——任意非字母，数字，下划线</li> <li><code>\s</code>——任意空白符                                  <code>\S</code>——任意非空白字符</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E7%89%B9%E6%AE%8A%E5%8D%95%E5%AD%97%E7%AC%A6.png" alt=""></p> <h4 id="空白符"><a href="#空白符" class="header-anchor">#</a> 空白符</h4> <ul><li><code>\n</code>——换行符（常用）</li> <li><code>\</code>——里面有一个空格，用来匹配空格</li> <li><code>\s</code>——可以匹配各种空白字符——（常用）</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E7%A9%BA%E7%99%BD%E7%AC%A6.png" alt=""></p> <h4 id="量词"><a href="#量词" class="header-anchor">#</a> 量词</h4> <ul><li><p>英文的星号（*）——0 到多次</p></li> <li><p>加号（+）——1 到多次</p></li> <li><p>问号（?）——0 到 1 次</p></li> <li><p>{m,n}——m 到 n 次</p></li> <li><p>{m}——出现m次</p></li> <li><p>{m,}——至少出现m次(注意后面的逗号)</p></li> <li><p><code>.*</code>——会匹配出长度最长的结果——默认贪婪匹配</p></li> <li><p><code>.*?</code>——会匹配出最短的结果——非贪婪匹配</p></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E9%87%8F%E8%AF%8D.png" alt=""></p> <h4 id="范围"><a href="#范围" class="header-anchor">#</a> 范围</h4> <ul><li><code>|</code>——用来隔开多个正则，表示满足其中任意一个就行（类似于或）</li> <li><code>[]</code>——代表多选一，可以表示里面的任意单个元素
<ul><li>[aeiou]——任意元音字符</li> <li>[a-z]——所有小写字符</li> <li>[^a-z]——<code>^</code>表示非，表达的是不能是里面的任何单个字符</li></ul></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E8%8C%83%E5%9B%B4.png" alt=""></p> <h4 id="断言"><a href="#断言" class="header-anchor">#</a> 断言</h4> <p><strong>正则中提供了一些结构，只用于匹配位置，而不是文本内容本身，这种结构就是断言</strong></p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%96%AD%E8%A8%80.webp" alt=""></p> <ul><li><p>单词边界(Word Bounday)</p> <ul><li><code>\b</code>——表示单词边界</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%8D%95%E8%AF%8D%E8%BE%B9%E7%95%8C.webp" alt=""></p> <ul><li><code>\btom\b</code>——保证只有一个tom</li></ul></li> <li><p>行的开始/结束(^,$)</p> <p>​	<strong>回车(\r)和换行(\n)是两个概念</strong></p> <ul><li><p>回车&amp;换行</p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%9B%9E%E8%BD%A6%E6%8D%A2%E8%A1%8C.webp" alt=""></p></li> <li><p>开始和结束</p> <ul><li>要求6位数字——<code>^\d{6}$</code></li></ul></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%BC%80%E5%A7%8B%E7%BB%93%E6%9D%9F.png" alt=""></p> <ul><li><p>多行模式下，<code>^</code> <code>$</code>可以匹配每一行的开头或者结尾</p> <ul><li>所以对于输入数据的开头或者结尾使用<code>\A</code>和<code>\z</code>(Python)</li></ul></li> <li><p>解决这个问题还有一种做法，我们可以在使用正则校验前，<strong>先判断一下字符串的长度</strong>，如果不满足长度要求，那就不需要再用正则去判断了。</p> <ul><li>相当于你用正则解决主要的问题，而不是所有问题，这也是前面说的使用正则要克制.</li></ul></li></ul></li></ul> <p>​</p> <ul><li><p>环视(Look Around)</p> <ul><li>环视就是要求匹配部分的前面或后面要满足（或不满足）某种规则，有些地方也称环视为<strong>零宽断言</strong></li> <li><strong>左尖括号代表看左边，没有尖括号是看右边，感叹号是非的意思。</strong></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E7%8E%AF%E8%A7%86.webp" alt=""></p> <ul><li>环视与子组
<ul><li>环视中虽然也有括号，但不会保存成子组</li> <li>保存成子组的一般是匹配到的文本内容，后续用于替换等操作，而环视是表示对文本左右环境的要求，即环视只匹配位置，不匹配文本内容</li></ul></li> <li>六位邮编
<ul><li>中间6位数字，左边不是数字，右边不是数字</li> <li><code>(?&lt;!\d)\d{6}(?!\d)</code></li></ul></li> <li>单词边界
<ul><li><code>\b\w+\b</code>——一个带边界的单词</li> <li><code>(?&lt;!w)\w+(?!\w)</code>或者<code>(?&lt;W)\w+(?!\w)</code></li></ul></li></ul></li></ul> <h4 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h4> <ul><li><p>某个资源，https://，http://，ftp://</p> <ul><li><code>(https?|ftp):\/\/</code> <ul><li><code>s?</code>——表示有一个或者没有s——匹配 http和https</li> <li><code>\/</code>——<code>\</code>表示转义字符，<code>\/</code>——表示正常的<code>/</code></li></ul></li></ul></li> <li><p>正则——手机号——第一版</p> <ul><li>第 1 位固定为数字 1；</li> <li>第 2 位可能是 3，4，5，6，7，8，9；</li> <li>第 3 位到第 11 位我们认为可能是 0-9 任意数字</li> <li><code>1[3-9][0-9]{9}</code></li></ul></li> <li><p>替换重复出现的单词</p> <ul><li><p>以前的做法</p> <ul><li><code>the little cat cat is in the hat hat, we like it.</code></li> <li>查找——<code>(\w+)\s\1</code></li> <li>替换——<code>\1</code></li> <li>这种做法无法满足</li></ul></li> <li><p>现在的做法</p> <ul><li><p><code>the little cat cat2 is in the hat hat2, we like it.</code></p></li> <li><p><code>cat</code>与<code>cat2</code>属于不同的单词，但是<code>(\w+)\s\1</code>达不到预计的效果</p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E9%94%99%E8%AF%AF%E7%A4%BA%E8%8C%83.png" alt=""></p></li> <li><p>查找——<code>(\w+)( \1\b)+</code></p> <ul><li>严谨点——<code>(\w+)(?:\s+\1\b)+</code></li> <li><code>?:</code>——不保存子组</li> <li><code>\s+</code>——可以匹配多个空白字符串</li></ul></li> <li><p>替换——<code>\1</code></p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%8D%95%E8%AF%8D%E6%9B%BF%E6%8D%A2%E7%A4%BA%E4%BE%8B.png" alt=""></p></li></ul></li></ul></li></ul> <h2 id="正则三种模式"><a href="#正则三种模式" class="header-anchor">#</a> 正则三种模式</h2> <p><strong>贪婪匹配，非贪婪匹配，独占模式</strong></p> <h4 id="贪婪匹配"><a href="#贪婪匹配" class="header-anchor">#</a> 贪婪匹配</h4> <blockquote><p>在正则中，<strong>表示次数的量词默认是贪婪的</strong>，在贪婪模式下，会尝试尽可能最大长度去匹配</p></blockquote> <ul><li>在字符串 aaabb 中使用正则 a* 的匹配过程</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/a%E5%8C%B9%E9%85%8D%E8%BF%87%E7%A8%8B.png" alt=""></p> <ul><li>a* 在匹配开头的 a 时，<strong>会尝试尽量匹配更多的 a</strong>，直到第一个字母 b 不满足要求为止，匹配上三个 a，后面每次匹配时都得到了空字符串。</li> <li><strong>贪婪模式的特点就是尽可能进行最大长度匹配</strong></li></ul> <h4 id="非贪婪匹配"><a href="#非贪婪匹配" class="header-anchor">#</a> 非贪婪匹配</h4> <blockquote><p>那么如何将贪婪模式变成非贪婪模式呢？<em><em>我们可以在量词后面加上英文的问号 (?)——a</em>？</em>*</p></blockquote> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E9%9D%9E%E8%B4%AA%E5%A9%AA%E5%8C%B9%E9%85%8D.png" alt=""></p> <ul><li>这次匹配到的结果都是单个的 a，就连每个 a 左边的空字符串也匹配上了。</li> <li><strong>非贪婪模式会尽可能短地去匹配</strong></li> <li>两种模式对比——查找引号字符</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E8%B4%AA%E5%A9%AA%E4%B8%8E%E9%9D%9E%E8%B4%AA%E5%A9%AA%E5%AF%B9%E6%AF%94.png" alt=""></p> <h4 id="独占模式"><a href="#独占模式" class="header-anchor">#</a> 独占模式</h4> <blockquote><p>​	不管是贪婪模式，还是非贪婪模式，都需要发生<strong>回溯</strong>才能完成相应的功能。</p> <p>​	独占模式，它类似贪婪匹配，但匹配过程<strong>不会发生回溯</strong>。</p></blockquote> <ul><li>贪婪模式（默认）</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%9B%9E%E6%BA%AF-%E8%B4%AA%E5%A9%AA.png" alt=""></p> <ul><li>非贪婪模式（量词？）</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%9B%9E%E6%BA%AF-%E9%9D%9E%E8%B4%AA%E5%A9%AA.png" alt=""></p> <ul><li>独占模式（量词+）</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E4%B8%8D%E5%9B%9E%E6%BA%AF-%E7%8B%AC%E5%8D%A0.png" alt=""></p> <ul><li><p>对比</p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%A8%A1%E5%BC%8F%E5%AF%B9%E6%AF%94.png" alt=""></p></li> <li><p>案例</p> <ul><li><code>we found “the little cat” is in the hat, we like “the little cat”</code></li> <li>要求，提取出所有单词，引号中的单词（the little cat）看做一个</li> <li><code>\w+|“.+?”</code>——双引号内部 非贪婪模式</li> <li><code>\w+|“[\w\s]+”</code>——双引号内部 单词，空白符，一个或多个</li> <li><code>\w+|“[^”]+”</code>——双引号内部，不包含引号的一个或多个字符</li></ul></li></ul> <h2 id="分组与引用"><a href="#分组与引用" class="header-anchor">#</a> 分组与引用</h2> <ul><li><p>案例1</p> <ul><li><p><code>\d{18}|\d{15}</code></p> <ul><li>能识别18位或者15位数字</li> <li>但是当每行数字超过18位后，只能识别18位的</li></ul></li> <li><p><code>\d{15}|\d{18}</code></p> <ul><li>只能识别15位</li> <li>因为18位中包含15位，且<strong>在大多数正则实现中，多分支选择都是左边的优先</strong></li></ul></li> <li><p><code>\d{15}(\d{3})?</code></p> <ul><li>前面表示15位，后面括号作为一个整体，加问号表示0个或者1个</li> <li>由多个元字符组成某个部分，应该被看成一个整体的时候，可以用<strong>括号括起来表示一个整体</strong>，这是括号的一个重要功能</li> <li><strong>其实用括号括起来还有另外一个作用，那就是“复用”</strong></li></ul></li></ul></li></ul> <h4 id="分组与编号"><a href="#分组与编号" class="header-anchor">#</a> 分组与编号</h4> <ul><li><p>子组</p> <ul><li><p>保存子组(默认)</p> <ul><li>用括号括起来的部分 子表达式  会被保存成一个子组</li> <li>默认情况下，子组会被保存，并分配编号</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%88%86%E7%BB%84%E4%B8%8E%E7%BC%96%E5%8F%B7.png" alt=""></p></li> <li><p>不保存子组</p> <ul><li><p>你可能只想用括号将某些部分看成一个整体，后续不用再用它。这时我们可以使用<code>(?:)</code> 不保存子组。</p></li> <li><p>不保存子组可以理解为，括号只用于归组，把某个部分当成“单个元素”，不分配编号，后面不会再进行这部分的引用。</p></li> <li><p>不保存子组，性能会比较高。</p></li></ul></li> <li><p>区别</p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%8C%BA%E5%88%AB.png" alt=""></p></li></ul></li></ul> <hr> <ul><li><p>括号嵌套查找编号</p> <ul><li>对嵌套的括号查询-编号——<strong>数左边开括号的个数即可</strong><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%8B%AC%E5%8F%B7%E5%B5%8C%E5%A5%97%E6%9F%A5%E7%BC%96%E5%8F%B7.png" alt=""></li></ul></li> <li><p>命名分组</p> <ul><li>一些编程语言提供了命名分组（named grouping），这样和数字相比更容易辨识，不容易出错。命名分组的格式为<code>(?P&lt;分组名&gt;正则)</code>。</li></ul></li></ul> <h4 id="分组引用"><a href="#分组引用" class="header-anchor">#</a> 分组引用</h4> <ul><li><p>各编程语言</p> <ul><li><p><code>\num</code>——<code>\1</code>(1为分组编号)——</p></li> <li><p><code>$1</code></p></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%88%86%E7%BB%84%E7%BC%96%E5%8F%B7.png" alt=""></p> <ul><li><p>分组引用在查找和替换中使用</p> <ul><li><p><code>(\w+) \1</code>——（中间有空格）<code>\w+</code>表示一个单词，<code>(\w+)\1</code>表示引用分组的第一个</p></li> <li><p><code>(\w+)\s\1</code>——空格尽量用 <code>\s</code></p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%9B%BF%E6%8D%A2%E5%88%86%E7%BB%84%E4%B8%AD%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA.png" alt=""></p></li> <li><p><code>\1</code>表示第一个分组，即 <code>((\d{4})-(\d{2})-(\d{2}))</code>=<code>2020-05-10</code></p></li> <li><p><code>\2</code>表示第二个分组，即 <code>(\d{4})</code>=<code>2020</code></p></li> <li><p>在替换的时候，引用<code>\1</code>,表示引用<code>2020-05-10</code></p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%97%B6%E9%97%B4%E6%9B%BF%E6%8D%A2.png" alt=""></p></li></ul></li></ul></li></ul> <h4 id="子组引用-重要"><a href="#子组引用-重要" class="header-anchor">#</a> 子组引用(*重要*)</h4> <ul><li><code>\d(\d){2}</code>——<code>\d(\d)+</code>——120
<ul><li>此时正则保存了一个子组，即<code>\1</code>=<code>0</code></li> <li>这种<code>()量词</code>的情况 只保留最后一个作为子组</li></ul></li> <li><code>\d(\d)(\d)</code>——120
<ul><li>此时正则保存了两个子组，即<code>\1</code>=<code>2</code>  &amp;&amp; <code>\2</code>=<code>0</code></li></ul></li> <li><code>\d(\d{2})</code>——<code>\d(\d+)</code>——120
<ul><li>此时正则保存了一个子组，即<code>\1</code>=<code>20</code></li> <li>这种<code>(量词)</code>，量词在括号里面的情况，整个括号表示一个整体，即一个子组</li></ul></li> <li><code>(\w+)\s\1</code>——<code>cat cat</code> <ul><li>第一个cat为子组1,后面的<code>\1</code>表示引用之前的子组cat</li> <li>这样即可表示 前后两个单词相同，即可表示 重复单词</li></ul></li> <li><code>((\w+)\s\2)</code>——<code>cat cat</code> <ul><li>第一个子组为 cat cat ,第二个子组为第一个 cat</li> <li><code>\2</code> 表示引用 第二个子组即第一个cat，这样也可以匹配上 重复单词</li></ul></li> <li><code>([a-z]+)(\d)\s\2</code>——<code>cat2 2</code> <ul><li>第一个子组为 cat， 因为<code>+</code>在括号里面</li> <li>第二个子组是2， <code>\2</code>表示引用第二个子组，即<code>2</code>,所有可以匹配上重复的字符2</li></ul></li> <li><code>(\w+)(\s\1)+</code>——<code>cat cat</code>或者<code>cat cat cat</code>或者<code>cat cat cat cat</code> <ul><li><p>第一个子组为第一个 cat</p></li> <li><p><code>\1</code>表示引用第一个子组，即引用 cat</p></li> <li><p><code>+</code>表示一个或多个，再次引用第一个子组 cat，这样就可以表示 匹配到多个重复的单词</p></li> <li><p>示例</p> <img src="/assets/实用工具/正则表达式/替换示例.png" style="zoom:50%;"> <ul><li><p>查找</p> <ul><li><code>(\w+)(\s\1)+</code></li></ul></li> <li><p>替换</p> <ul><li><code>\1</code></li></ul></li></ul></li></ul></li></ul> <h2 id="匹配模式"><a href="#匹配模式" class="header-anchor">#</a> 匹配模式</h2> <p><strong>模式--mode</strong></p> <ul><li><p>模式修饰符——<code>(?模式标识)</code></p> <ul><li>不区分大小写——<code>(?i)</code>——Insensitive首字母的小写</li> <li>点号通配模式——<code>(?s)</code>——Single</li> <li>多行匹配模式——<code>(?m)</code>——Multiline</li> <li>注释模式——<code>(?#)</code></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F.webp" alt=""></p></li></ul> <h4 id="不区分大小写模式-case-insensitive"><a href="#不区分大小写模式-case-insensitive" class="header-anchor">#</a> 不区分大小写模式（case-Insensitive）</h4> <ul><li><p>找出所有cat，不区分大小写</p> <ul><li>CAT=CAt=Cat=cat=cAt=cAT=cAt=caT</li> <li><code>[Cc][Aa][Tt]</code>——笨方法</li> <li><code>(?i)cat</code></li></ul></li> <li><p>匹配两个连续出现的cat，不区分大小写</p> <ul><li><code>(?i)(cat)\s\1</code></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E4%B8%8D%E5%8C%BA%E5%88%86%E5%A4%A7%E5%B0%8F%E5%86%991.png" alt=""></p></li> <li><p>不区分大小写，匹配两个连续出现的cat，且第一次和第二次大小写一致</p> <ul><li><code>((?i)cat) \1</code></li> <li>用一个大括号包裹起来，表示不区分大小写只作用于这个括号里的内容</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E4%B8%8D%E5%8C%BA%E5%88%86%E5%A4%A7%E5%B0%8F%E5%86%992.png" alt=""></p></li> <li><p>部分区分大小写——the cat 中  the不区分，cat区分</p> <ul><li><code>((?i)the) cat</code></li> <li>让模式修饰符<code>(?i)</code>只作用于<code>the</code>,而不作用于<code>cat</code></li> <li>如果不加括号，默认是两个都会被作用（即作用于整个正则），加了括号，相当于加了限定条件，只作用于<code>the</code></li></ul></li> <li><p>总结</p> <ul><li>不区分大小写模式的指定方式，使用模式修饰符 (?i)；</li> <li>修饰符如果在括号内，作用范围是这个括号内的正则，而不是整个正则；</li> <li>使用编程语言时可以使用预定义好的常量来指定匹配模式。</li></ul></li></ul> <h4 id="点号通配模式-single"><a href="#点号通配模式-single" class="header-anchor">#</a> 点号通配模式（Single）</h4> <p><strong>也叫单行匹配模式，但是和多行匹配模式没有关系</strong></p> <ul><li><code>.</code>——可以匹配<strong>除了换行</strong>之外的任何字符</li> <li><code>(?s).</code>——可以匹配<strong>包括换行</strong>在内的任何字符</li></ul> <h4 id="多行匹配模式-multiline"><a href="#多行匹配模式-multiline" class="header-anchor">#</a> 多行匹配模式（Multiline）</h4> <ul><li><p>默认</p> <ul><li><p><code>^</code>——匹配<strong>整个字符串</strong>的开头</p></li> <li><p><code>$</code>——匹配<strong>整个字符串</strong>的结尾</p></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E9%BB%98%E8%AE%A4%E5%8C%B9%E9%85%8D.png" alt=""></p></li> <li><p><code>(?m)</code>——多行匹配模式</p> <ul><li><code>^</code>——匹配<strong>每行</strong>的开头</li> <li><code>$</code>——匹配<strong>每行</strong>的结尾</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%A4%9A%E8%A1%8C%E5%8C%B9%E9%85%8D.png" alt=""></p></li></ul> <h4 id="注释模式-comment"><a href="#注释模式-comment" class="header-anchor">#</a> 注释模式（Comment）</h4> <ul><li>正则表达式很复杂，可以在正则表达式内部加入注释</li> <li><code>(?#)</code></li> <li><code>(\w+)(?#word)\s\1(?#word repeat again)</code></li></ul> <h4 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例</h4> <ul><li><p>HTML 标签是不区分大小写的，比如我们要提取网页中的 head 标签中的内容，用正则如何实现呢？</p></li> <li><blockquote><Head id="diana"><div class="language- extra-class"><pre><code> &lt;meta charset=&quot;utf-8&quot;&gt;
</code></pre></div></Head></blockquote></li> <li><p><code>(?si)&lt;head.*?&gt;.*&lt;\/head&gt;</code></p></li></ul> <h2 id="转义"><a href="#转义" class="header-anchor">#</a> 转义</h2> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%AD%A3%E5%88%99%E8%BD%AC%E4%B9%89.webp" alt=""></p> <ul><li><p>常用转义字符</p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%B8%B8%E7%94%A8%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6.png" alt=""></p></li></ul> <h4 id="字符串转义和正则转义"><a href="#字符串转义和正则转义" class="header-anchor">#</a> 字符串转义和正则转义</h4> <ul><li><p>正则中：</p> <ul><li><p><code>\d</code>——表示单个数字</p></li> <li><p><code>\\d</code>——表示<code>\d</code>——<code>\\</code>表示真正的反斜杠</p></li> <li><p><code>\\|d</code>——表示<code>\</code>或者<code>d</code></p></li></ul></li> <li><p>程序中：</p> <ul><li><p><code>\\\\</code>——<code>\</code></p> <ul><li><p>四个反斜杠表示一个反斜杠</p></li> <li><p>因为先经过字符串转义<code>\\\\</code>——<code>\\</code>,真正被读入正则的只有<code>\\</code></p></li> <li><p>然后，正则转义<code>\\</code>——<code>\</code></p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%8F%8D%E6%96%9C%E6%9D%A0%E8%BD%AC%E4%B9%89.webp" alt=""></p></li></ul></li> <li><p>python中，可以使用原生字符串的方式来避免出现上面的情况</p> <div class="language-py extra-class"><pre class="language-py"><code>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'\\\\'</span><span class="token punctuation">,</span> <span class="token string">'a*b+c?\\d123d\\'</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'\\'</span><span class="token punctuation">,</span> <span class="token string">'\\'</span><span class="token punctuation">]</span><span class="token operator">//</span> 第一个\表示转义字符，第二个反斜杠表示真正的反斜杠


<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'\\'</span><span class="token punctuation">,</span> <span class="token string">'a*b+c?\\d123d\\'</span><span class="token punctuation">)</span> <span class="token operator">//</span>r表示读入原生字符
<span class="token punctuation">[</span><span class="token string">'\\'</span><span class="token punctuation">,</span> <span class="token string">'\\'</span><span class="token punctuation">]</span>


</code></pre></div></li></ul></li></ul> <h4 id="元字符的转义"><a href="#元字符的转义" class="header-anchor">#</a> 元字符的转义</h4> <ul><li><p>一般转义(直接在前面加<code>\</code>即可)</p> <ul><li><code>\*</code>——<code>*</code></li> <li><code>\+</code>——<code>+</code></li> <li><code>\?</code>——<code>?</code></li> <li><code>\-</code>——-``</li> <li><code>\^</code>——<code>^</code></li> <li><code>\$</code>——<code>$</code></li> <li><code>\|</code>——<code>|</code></li></ul></li> <li><p>括号的转义</p> <ul><li>方括号 [] 和 花括号 {} 只需转义开括号</li> <li>圆括号 () 两个都要转义</li></ul> <div class="language-pyt extra-class"><pre class="language-text"><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; re.findall('\(\)\[]\{}', '()[]{}')
['()[]{}']
&gt;&gt;&gt; re.findall('\(\)\[\]\{\}', '()[]{}')  # 方括号和花括号都转义也可以
['()[]{}']
</code></pre></div></li> <li><p>转义函数</p> <ul><li>使用转义函数可以将整个文本转义，将整个文本看做是一个正常的字符串，将其中的特殊字符加上转义。</li></ul> <div class="language-pyt extra-class"><pre class="language-text"><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; re.escape('\d')  # 反斜杠和字母d转义
'\\\\d'
&gt;&gt;&gt; re.findall(re.escape('\d'), '\d')
['\\d']

&gt;&gt;&gt; re.escape('[+]')  # 中括号和加号
'\\[\\+\\]'
&gt;&gt;&gt; re.findall(re.escape('[+]'), '[+]')
['[+]']
</code></pre></div><ul><li>其他编程语言的函数</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%85%B6%E4%BB%96%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E7%9A%84%E8%BD%AC%E4%B9%89%E5%87%BD%E6%95%B0.webp" alt=""></p></li></ul> <h4 id="字符组中的转义"><a href="#字符组中的转义" class="header-anchor">#</a> 字符组中的转义</h4> <p><strong>在字符组里只有三种情况需要转义</strong></p> <ul><li>脱字符<code>^</code>在中括号中，且在第一个位置需要转义
<ul><li>转义前代表非</li> <li>转义后代表普通字符</li></ul></li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[^ab]'</span><span class="token punctuation">,</span> <span class="token string">'^ab'</span><span class="token punctuation">)</span>  <span class="token comment"># 转义前代表&quot;非&quot;</span>
<span class="token punctuation">[</span><span class="token string">'^'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[\^ab]'</span><span class="token punctuation">,</span> <span class="token string">'^ab'</span><span class="token punctuation">)</span>  <span class="token comment"># 转义后代表普通字符</span>
<span class="token punctuation">[</span><span class="token string">'^'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>中划线<code>-</code>在中括号中，且不在首尾位置
<ul><li>在开头或者结尾不需要转义</li> <li>在中间
<ul><li>转义前表示范围</li> <li>转义后表示普通字符</li></ul></li></ul></li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[a-c]'</span><span class="token punctuation">,</span> <span class="token string">'abc-'</span><span class="token punctuation">)</span>  <span class="token comment"># 中划线在中间，代表&quot;范围&quot;</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[a\-c]'</span><span class="token punctuation">,</span> <span class="token string">'abc-'</span><span class="token punctuation">)</span>  <span class="token comment"># 中划线在中间，转义后的</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[-ac]'</span><span class="token punctuation">,</span> <span class="token string">'abc-'</span><span class="token punctuation">)</span>  <span class="token comment"># 在开头，不需要转义</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[ac-]'</span><span class="token punctuation">,</span> <span class="token string">'abc-'</span><span class="token punctuation">)</span>  <span class="token comment"># 在结尾，不需要转义</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">]</span>

</code></pre></div><ul><li>右括号<code>]</code>在中括号中，且不在首位
<ul><li>在首位不需要转义，表示普通字符</li> <li>不在首位，需要转义，不然<code>[]</code>会被认为提前结束</li></ul></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[]ab]'</span><span class="token punctuation">,</span> <span class="token string">']ab'</span><span class="token punctuation">)</span>  <span class="token comment"># 右括号不转义，在首位</span>
<span class="token punctuation">[</span><span class="token string">']'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[a]b]'</span><span class="token punctuation">,</span> <span class="token string">']ab'</span><span class="token punctuation">)</span>  <span class="token comment"># 右括号不转义，不在首位</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 匹配不上，因为含义是 a后面跟上b]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[a\]b]'</span><span class="token punctuation">,</span> <span class="token string">']ab'</span><span class="token punctuation">)</span>  <span class="token comment"># 转义后代表普通字符</span>
<span class="token punctuation">[</span><span class="token string">']'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span>
</code></pre></div><p><strong>其他字符，无需转义</strong></p> <ul><li>[]内部，<code>+</code>,<code>*</code>,<code>?</code>,<code>.</code>,<code>()</code>等不需要转义，就代表原来的字符.</li> <li>但如果在中括号中出现<code>\d</code>或<code>\w</code> 等符号时，他们还是元字符本身的含义。
<ul><li>\d=数字——\w=字符</li></ul></li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[.*+?()]'</span><span class="token punctuation">,</span> <span class="token string">'[.*+?()]'</span><span class="token punctuation">)</span>  <span class="token comment"># 单个长度的元字符 </span>
<span class="token punctuation">[</span><span class="token string">'.'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token string">'+'</span><span class="token punctuation">,</span> <span class="token string">'?'</span><span class="token punctuation">,</span> <span class="token string">'('</span><span class="token punctuation">,</span> <span class="token string">')'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[\d]'</span><span class="token punctuation">,</span> <span class="token string">'d12\\'</span><span class="token punctuation">)</span>  <span class="token comment"># \w，\d等在中括号中还是元字符的功能</span>
<span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">]</span>  <span class="token comment"># 匹配上了数字，而不是反斜杠\和字母d</span>
</code></pre></div><h4 id="示例-3"><a href="#示例-3" class="header-anchor">#</a> 示例</h4> <ul><li><code>\\n\n\\</code>——换行符<code>\n</code>,用△表示</li> <li>即<code>\\ n \n \\</code>——&gt;字符串转义<code>\n△\</code></li> <li>输入字符串——字符串转义——正则转义
<ul><li><code>\n</code>——&gt;<code>△</code>——&gt;<code>△</code>=换行符</li> <li><code>\\n</code>——&gt;<code>\n</code>——&gt;<code>△</code>=换行符</li> <li><code>\\\n</code>——&gt;<code>\△</code>——&gt;<code>△</code>=换行符</li> <li><code>\\\\n</code>——&gt;<code>\\n</code>——&gt;<code>\n</code>=反斜杠+n</li></ul></li></ul> <div class="language-py extra-class"><pre class="language-py"><code>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token string">'\\n\n\\'</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'\n'</span><span class="token punctuation">]</span>  <span class="token comment"># 找到了换行符</span>


<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'\\n'</span><span class="token punctuation">,</span> <span class="token string">'\\n\n\\'</span><span class="token punctuation">)</span>  <span class="token operator">//</span>输入`\n`<span class="token punctuation">,</span>匹配到`\n`
<span class="token punctuation">[</span><span class="token string">'\n'</span><span class="token punctuation">]</span>  <span class="token comment"># 找到了换行符</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'\\\n'</span><span class="token punctuation">,</span> <span class="token string">'\\n\n\\'</span><span class="token punctuation">)</span> <span class="token operator">//</span>输入`\△`，
<span class="token punctuation">[</span><span class="token string">'\n'</span><span class="token punctuation">]</span>  <span class="token comment"># 找到了换行符</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'\\\\n'</span><span class="token punctuation">,</span> <span class="token string">'\\n\n\\'</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'\\n'</span><span class="token punctuation">]</span> <span class="token comment"># 找到了反斜杠和字母n</span>
</code></pre></div><h2 id="正则流派"><a href="#正则流派" class="header-anchor">#</a> 正则流派</h2> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%AD%A3%E5%88%99%E6%B5%81%E6%B4%BE.webp" alt=""></p> <h4 id="posix-流派"><a href="#posix-流派" class="header-anchor">#</a> POSIX 流派</h4> <ul><li>BRE
<ul><li>GNU BRE 只有一个 E，使用时“花圆问管加”(<code>{}()?|+</code>)时都要转义</li> <li>早期标准，BRE不支持 <code>?</code> <code>+</code> <code>|</code></li> <li>GNU BRE 支持，但是需要加转义字符，即,<code>\?</code> <code>\+</code> <code>\|</code></li></ul></li> <li>ERE
<ul><li>GNU ERE 名称中有两个 E，不需要再转义</li></ul></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/BRE-ERE.webp" alt=""></p> <h4 id="pcre-流派"><a href="#pcre-流派" class="header-anchor">#</a> PCRE 流派</h4> <ul><li>来源于 <code>Prel</code>分支
<ul><li>这个流派显著特征是有\d、\w、\s 这类字符fin组简记方式</li></ul></li> <li>现在大部分编程语言支持的都是这个流派</li></ul> <h4 id="linux中使用正则"><a href="#linux中使用正则" class="header-anchor">#</a> Linux中使用正则</h4> <ul><li>按照 BRE 标准 实现的有 <strong>grep、sed 和 vi/vim</strong> 等</li> <li>按照 ERE 标准 实现的有 <strong>egrep、awk</strong> 等</li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/Linux%E6%B5%81%E6%B4%BE.webp" alt=""></p> <ul><li><p>可以使用 <code>man grep</code>来查看支持那些标准</p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/man-grep.webp" alt=""></p></li> <li><p><code>grep</code>默认是 BRE流派</p></li> <li><p><code>egrep</code>=<code>grep -E</code>,是ERE流派</p></li> <li><p><code>grep -P</code>是PCRE 流派</p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/Liunx%E4%B8%8B%E6%9F%A5%E6%89%BE.png" alt=""></p></li></ul> <h2 id="正则应用"><a href="#正则应用" class="header-anchor">#</a> 正则应用</h2> <h4 id="正则处理unicode编码"><a href="#正则处理unicode编码" class="header-anchor">#</a> 正则处理Unicode编码</h4> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/Unicode%E6%AD%A3%E5%88%99.webp" alt=""></p> <ul><li><p><code>\w</code>——不能匹配汉字</p></li> <li><p>量词正常使用</p></li> <li><p><code>'极客{3}'</code></p> <ul><li>匹配<code>极客客客</code></li> <li>表示的是客这个汉字重复3次，而不是客这个汉字对应的编码最后一个字节重复3次</li> <li>如果重复是最后一个字节，应该<code>极(?:客){3}</code>——分组的形式</li></ul></li></ul> <h4 id="在编辑器中使用正则-sublime-text"><a href="#在编辑器中使用正则-sublime-text" class="header-anchor">#</a> 在编辑器中使用正则（Sublime Text）</h4> <ul><li>Sublime 的一些快捷键
<ul><li><code>shift</code>+<code>alt</code>+<code>1-9</code>(非小键盘)
<ul><li>使屏幕显示相等数字的小窗口</li></ul></li> <li><code>ctrl</code>+<code>h</code>——替换</li> <li><code>Ctrl+L</code>——选择整行</li></ul></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E7%BC%96%E8%BE%91%E5%99%A8%E5%A4%84%E7%90%86%E6%96%87%E6%9C%AC.webp" alt=""></p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%BE%91%E5%99%A8.webp" alt=""></p> <ul><li><p>光标移动和文本选择</p> <ul><li>按住<code>shift</code>键选中，然后按左右键可以左右选择文本块</li> <li>按住<code>shift</code>+<code>alt</code>，<strong>光标可以按块移动，快速移动到下一个单词</strong>。</li></ul></li> <li><p>多焦点编辑</p> <ul><li><p>查找——&gt;快速查找全部</p></li> <li><p>例子：提取JSON中的姓名和手机号</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;error_code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;朱小明&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;tel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;138xx138000&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;王五&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;tel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;139xx139000&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

朱小明
138xx138000
王五
139xx139000

</code></pre></div><ul><li>选中<code>&quot;: &quot;</code>,快速查找全部</li> <li>按右方向键，将光标移动到引号右边</li> <li>按住<code>shift</code>+<code>alt</code>，快速选择整个引号内的内容</li> <li>复制，粘贴即可</li></ul></li></ul></li> <li><p>竖向编辑</p> <ul><li><code>shift</code>+鼠标右键,可同时操作处于同一列的文本，同时编辑</li> <li><code>ctrl</code>+鼠标左键，可以选中多处文本，同时编辑。</li></ul></li> <li><p>内容提取</p> <ul><li><p><code>\S+@\S+\.\S+(?=;)</code>——简单邮箱提取</p> <ul><li><code>\S</code>——任意非空白字符</li> <li><code>(?=;)</code>——环视<code>;</code></li></ul></li> <li><div class="language-xml extra-class"><pre class="language-xml"><code>小李： jkmkqhvrc@265.com;
小王： atvl@sogou@.com;
小红： vtoispm@tom.com;
小真： olncckkerlikb@citiz.com;
小爱： mddbatlosa@msn.com;

jkmkqhvrc@265.com
atvl@sogou@.com
vtoispm@tom.com
olncckkerlikb@citiz.com
mddbatlosa@msn.com
</code></pre></div></li></ul></li> <li><p>内容替换</p> <ul><li><p><code>(\S+@(\S+)\.\S+)</code>==查找</p> <ul><li>两个括号，两个分组，均可以用来引用
<ul><li><code>\1</code>=<code>jkmkqhvrc@265.com</code></li> <li><code>\2</code>=<code>265</code></li></ul></li></ul></li> <li><p><code>\2邮箱 ===\1</code>==替换</p></li> <li><div class="language-xml extra-class"><pre class="language-xml"><code>jkmkqhvrc@265.com
atvl@sogou@.com
vtoispm@tom.com
olncckkerlikb@citiz.com
mddbatlosa@msn.com

265邮箱 ===jkmkqhvrc@265.com
sogou@邮箱 ===atvl@sogou@.com
tom邮箱 ===vtoispm@tom.com
citiz邮箱 ===olncckkerlikb@citiz.com
msn邮箱 ===mddbatlosa@msn.com
</code></pre></div></li></ul></li> <li><p>统计一篇英文文章中每个单词出现的次数</p> <ul><li><p>处理成一行一个单词</p> <ul><li><p><code>\W</code>——<code>\n</code></p></li> <li><p>将非字符转换成空格</p></li> <li><p><code>(?&lt;!\w)\s</code>——``</p> <ul><li>将左边不是字符的空格去掉</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>I have a cat, cat is a dog, dog is I cat.


I
have
a
cat

cat
is
a
dog

dog
is
I
cat


I
have
a
cat
cat
is
a
dog
dog
is
I
cat
</code></pre></div></li></ul></li> <li><p>使用sort 命令排序，uniq -c统计次数</p> <div class="language-xml extra-class"><pre class="language-xml"><code>uniq -c：   统计每行出现次数
sort :
	-n  按数字排序
	-r	逆序排序
	-k1	根据-t的分割，分成几域，取第1个域排序
	-t  指定分隔符，默认的分隔符为空白字符和非空白字符之间的空字符
head -n10： 取前10行数据
</code></pre></div><div class="language-linux extra-class"><pre class="language-text"><code>$ sort word.txt | uniq -c
      2 I
      2 a
      3 cat
      2 dog
      1 have
      2 is

$ sort word.txt | uniq -c | sort -nr
      3 cat
      2 is
      2 dog
      2 a
      2 I
      1 have

</code></pre></div></li></ul></li></ul> <h4 id="在语言中用正则"><a href="#在语言中用正则" class="header-anchor">#</a> 在语言中用正则</h4> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99.webp" alt=""></p> <ul><li><p>校验</p> <p><strong>验证日期  2022-06-01</strong></p> <ul><li><p>python</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 测试环境 Python3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span><span class="token string">r'\d{4}-\d{2}-\d{2}'</span><span class="token punctuation">,</span> <span class="token string">'2020-06-01'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>re<span class="token punctuation">.</span>Match <span class="token builtin">object</span><span class="token punctuation">;</span> span<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token operator">=</span><span class="token string">'2020-06-01'</span><span class="token operator">&gt;</span>
<span class="token comment"># 这个输出是匹配到了，范围是从下标0到下标10，匹配结果是2020-06-01</span>
<span class="token comment"># re.search 输出结果也是类似的</span>
</code></pre></div><ul><li><code>\A</code> <code>\Z</code>表示文本的开头和结尾</li> <li>不建议使用<code>^</code>和<code>$</code>,因为在多行模式下，可以表示每行的开头和结尾</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 测试环境 Python3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\A\d{4}-\d{2}-\d{2}\Z'</span><span class="token punctuation">)</span>  <span class="token comment"># 建议先编译，提高效率</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'2020-06-01'</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span><span class="token string">'2020-06-01'</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span>  <span class="token comment"># 使用match时\A可省略</span>
<span class="token boolean">True</span>

</code></pre></div></li> <li><p>java</p> <ul><li><code>\A</code> <code>\z</code>表示文本的开头和结尾</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Matcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//方法1，可以不加 \A 和 \z</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">&quot;\\d{4}-\\d{2}-\\d{2}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2020-06-01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

    <span class="token comment">//方法2，可以不加 \A 和 \z</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2020-06-01&quot;</span><span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">&quot;\\d{4}-\\d{2}-\\d{2}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
    
    <span class="token comment">//方法3，必须加上 \A 和 \z</span>
    <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\A\\d{4}-\\d{2}-\\d{2}\\z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span><span class="token string">&quot;2020-06-01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p>提取</p> <p><strong>日志时间提取</strong></p> <ul><li>python</li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># 没有子组时</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\d{4}-\d{2}'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'2020-05 2020-06'</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'2020-05'</span><span class="token punctuation">,</span> <span class="token string">'2020-06'</span><span class="token punctuation">]</span>

<span class="token comment"># 有子组时</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'(\d{4})-(\d{2})'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'2020-05 2020-06'</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'2020'</span><span class="token punctuation">,</span> <span class="token string">'05'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'2020'</span><span class="token punctuation">,</span> <span class="token string">'06'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>节约内存，使用迭代器</li></ul> <div class="language-py extra-class"><pre class="language-py"><code>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'(\d{4})-(\d{2})'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> <span class="token keyword">match</span> <span class="token keyword">in</span> reg<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span><span class="token string">'2020-05 2020-06'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'date: '</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 整个正则匹配到的内容</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'year: '</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 第一个子组</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'month:'</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 第二个子组</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
date<span class="token punctuation">:</span>  <span class="token number">2020</span><span class="token operator">-</span><span class="token number">05</span>
year<span class="token punctuation">:</span>  <span class="token number">2020</span>
month<span class="token punctuation">:</span> <span class="token number">05</span>
date<span class="token punctuation">:</span>  <span class="token number">2020</span><span class="token operator">-</span><span class="token number">06</span>
year<span class="token punctuation">:</span>  <span class="token number">2020</span>
month<span class="token punctuation">:</span> <span class="token number">06</span>
</code></pre></div><ul><li><p>java</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Matcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\d{4}-\\d{2}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Matcher</span> match <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span><span class="token string">&quot;2020-06 2020-07&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p>替换</p> <p><strong>(02-20-2022)月日年——年月日(2022年02月20日)</strong></p> <ul><li>python</li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'(\d{2})-(\d{2})-(\d{4})'</span><span class="token punctuation">)</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'\3年\1月\2日'</span><span class="token punctuation">,</span> <span class="token string">'02-20-2020 05-21-2020'</span><span class="token punctuation">)</span>
<span class="token string">'2020年02月20日 2020年05月21日'</span>

<span class="token comment"># 可以在替换中使用 \g&lt;数字&gt;，如果分组多于10个时避免歧义</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'\g&lt;3&gt;年\g&lt;1&gt;月\g&lt;2&gt;日'</span><span class="token punctuation">,</span> <span class="token string">'02-20-2020 05-21-2020'</span><span class="token punctuation">)</span>
<span class="token string">'2020年02月20日 2020年05月21日'</span>

<span class="token comment"># 返回替换次数</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span>subn<span class="token punctuation">(</span><span class="token string">r'\3年\1月\2日'</span><span class="token punctuation">,</span> <span class="token string">'02-20-2020 05-21-2020'</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token string">'2020年02月20日 2020年05月21日'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

</code></pre></div><ul><li>java
<ul><li>替换时 引用子组要用  <code>$</code></li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Matcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//方法1，输出 2020年02月20日 2020年05月21日</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;02-20-2020 05-21-2020&quot;</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;(\\d{2})-(\\d{2})-(\\d{4})&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;$3年$1月$2日&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//方法2，输出 2020年02月20日 2020年05月21日</span>
    <span class="token keyword">final</span> <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;(\\d{2})-(\\d{2})-(\\d{4})&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Matcher</span> match <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span><span class="token string">&quot;02-20-2020 05-21-2020&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;$3年$1月$2日&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>切割</p> <p><strong>切割得到单词</strong></p> <ul><li>python</li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\W+'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;apple, pear! orange; tea&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'pear'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'tea'</span><span class="token punctuation">]</span>

<span class="token comment"># 限制切割次数，比如切一刀，变成两部分</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;apple, pear! orange; tea&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'pear! orange; tea'</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>java</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Matcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\W+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> pattern<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;apple, pear! orange; tea&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>示例</p> <p><strong>xxx#163.com (请把#换成@)</strong></p> <ul><li>python</li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token operator">//</span> 替换——在用正则提取邮箱
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token operator">=</span>re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'#'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'@'</span><span class="token punctuation">,</span><span class="token string">'xxx#163.com'</span><span class="token punctuation">)</span>
<span class="token string">'xxx@163.com'</span>

<span class="token operator">//</span>提取
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token operator">=</span>re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\w+[#@]\w+.\w+'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> reg<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'联系邮箱：xxx#163.com (请把#换成@) 联系邮箱：xxx@163.com'</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'xxx#163.com'</span><span class="token punctuation">,</span> <span class="token string">'xxx@163.com'</span><span class="token punctuation">]</span>

</code></pre></div><ul><li>java</li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Matcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span></span><span class="token punctuation">;</span>

<span class="token comment">//替换</span>
<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   		<span class="token class-name">Pattern</span> compile <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> compile<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span><span class="token string">&quot;xxx#163.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;@&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//提取</span>
<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//提取 带#或者带@的邮箱</span>
        <span class="token class-name">Pattern</span> pattern<span class="token operator">=</span><span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\w+[@#]\\w+.\\w+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span><span class="token string">&quot;联系邮箱：xxx#163.com (请把#换成@) 联系邮箱：xxx@163.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h2> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%E5%8E%9F%E7%90%86.webp" alt=""></p> <h4 id="正则匹配原理"><a href="#正则匹配原理" class="header-anchor">#</a> 正则匹配原理</h4> <ul><li><p>有穷状态自动机</p> <ul><li>正则之所以能够处理复杂文本，就是因为采用了有穷状态自动机</li> <li>有穷自动机的具体实现称为正则引擎，主要有 DFA 和 NFA 两种
<ul><li>DFA：确定性有穷自动机（Deterministic finite automaton）
NFA：非确定性有穷自动机（Non-deterministic finite automaton）</li></ul></li></ul></li> <li><p>正则匹配过程</p> <ul><li><p>编译**(compile)**的过程，其实就是生成自动机的过程</p></li> <li><p>NFA工作机制</p> <p><strong>NFA 引擎的工作方式是，先看正则，再看文本，而且以正则为主导</strong></p> <blockquote><p>字符串：we study on jikeshijian app
正则：jike(zhushou|shijian|shixi)</p></blockquote> <ul><li><p>正则中的第一个字符是 j，NFA 引擎在字符串中查找 j，接着匹配其后是否为 i ，如果是 i 则继续，这样一直找到 jike</p> <blockquote><p>regex: jike(zhushou|shijian|shixi)
^
text: we study on jikeshijian app
^</p></blockquote></li> <li><p>我们再根据正则看文本后面是不是 z，发现不是，此时 zhushou 分支淘汰</p> <blockquote><p>regex: jike(zhushou|shijian|shixi)
^
淘汰此分支(zhushou)
text: we study on jikeshijian app
^</p></blockquote></li> <li><p>我们接着看其它的分支，看文本部分是不是 s，直到 shijian 整个匹配上。</p></li> <li><p><strong>shijian 在匹配过程中如果不失败，就不会看后面的 shixi 分支。</strong></p></li> <li><p>假设这里文本改一下，把 jikeshijian 变成 jikeshixi，正则 shijian 的 j 匹配不上时 shixi 的 x，会接着使用正则 shixi 来进行匹配，<strong>重新从 s 开始（NFA 引擎会记住这里）</strong>。</p> <blockquote><p>第二个分支匹配失败
regex: jike(zhushou|shijian|shixi)
^
淘汰此分支(正则j匹配不上文本x)
text: we study on jikeshixi app
^</p> <p>再次尝试第三个分支
regex: jike(zhushou|shijian|shixi)
^
text: we study on jikeshixi app
^</p></blockquote></li></ul></li> <li><p>DFA工作机制</p> <p><strong>DFA 会先看文本，再看正则表达式，是以文本为主导的</strong></p> <ul><li><p>DFA 会从 we 中的 w 开始依次查找 j，定位到 j ，这个字符后面是 i。所以我们接着看正则部分是否有 i ，如果正则后面是个 i ，那就以同样的方式，匹配到后面的 ke</p> <blockquote><p>text: we study on jikeshijian app
^
regex: jike(zhushou|shijian|shixi)
^</p></blockquote></li> <li><p>继续进行匹配，文本 e 后面是字符 s ，DFA 接着看正则表达式部分，此时 zhushou 分支被淘汰，开头是 s 的分支 shijian 和 shixi 符合要求。</p> <blockquote><p>text: we study on jikeshijian app
^
regex: jike(zhushou|shijian|shixi)
^               ^            ^
淘汰       符合        符合</p></blockquote></li> <li><p>然后 DFA 依次检查字符串，检测到 shijian 中的 j 时，只有 shijian 分支符合，淘汰 shixi，接着看分别文本后面的 ian，和正则比较，匹配成功。</p> <blockquote><p>text: we study on jikeshijian app
^
regex: jike(zhushou|shijian|shixi)
^            ^
符合     淘汰</p></blockquote></li></ul></li> <li><p>DFA与NFA</p> <ul><li>一般来说，DFA 引擎会更快一些，因为整个匹配过程中，字符串只看一遍，不会发生回溯，相同的字符不会被测试两次。也就是说 DFA 引擎执行的时间一般是线性的。DFA 引擎可以确保匹配到可能的最长字符串。但由于 DFA 引擎只包含有限的状态，所以它没有反向引用功能；并且因为它不构造显示扩展，它也不支持捕获子组。</li> <li>NFA 以表达式为主导，它的引擎是使用贪心匹配回溯算法实现。<strong>NFA 通过构造特定扩展，支持子组和反向引用</strong>。但由于 NFA 引擎会发生回溯，即它会对字符串中的同一部分，进行很多次对比。因此，在最坏情况下，它的执行速度可能非常慢。</li></ul></li> <li><p>POSIX NFA</p> <ul><li>POSIX NFA 引擎与传统的 NFA 引擎类似，但不同之处在于，<strong>POSIX NFA 在找到可能的最长匹配之前会继续回溯</strong>，也就是说它会<strong>尽可能找最长</strong>的，如果分支一样长，以最左边的为准</li> <li>比如使用正则 pos|posix 在文本 posix 中进行匹配，传统的 NFA 从文本中找到的是 pos，而不是 posix，而 POSIX NFA 找到的是 posix</li></ul></li> <li><p>三者比较</p></li></ul> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E4%B8%89%E8%80%85%E5%B7%A5%E4%BD%9C%E5%BC%95%E6%93%8E.webp" alt=""></p></li></ul> <h4 id="回溯"><a href="#回溯" class="header-anchor">#</a> 回溯</h4> <p>回溯是 NFA 引擎才有的，并且只有在正则中出现<strong>量词或多选分支结构</strong>时，才可能会发生回溯。</p> <ul><li><p><code>+</code></p> <blockquote><p>比如我们使用正则 a+ab 来匹配 文本 aab 的时候，过程是这样的，a+ 是贪婪匹配，会占用掉文本中的两个 a，但正则接着又是 a，文本部分只剩下 b，只能通过回溯，让 a+ 吐出一个 a，再次尝试</p></blockquote></li> <li><p><code>.*</code></p> <blockquote><p>如果正则是使用 .*ab 去匹配一个比较长的字符串就更糟糕了，因为 .* 会吃掉整个字符串（不考虑换行，假设文本中没有换行），然后，你会发现正则中还有 ab 没匹配到内容，只能将 .* 匹配上的字符串吐出一个字符，再尝试，还不行，再吐出一个，不断尝试</p></blockquote> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%9C%80%E9%95%BF%E5%8C%B9%E9%85%8D.webp" alt=""></p> <ul><li>所以在工作中，我们要尽量不用 .*,可以用其他方式来替换
<ul><li>比如要提取引号中的内容时</li> <li><code>&quot;.+?&quot;</code>——非贪婪模式</li> <li><code>&quot;[^&quot;]+&quot;</code>——双引号内部，非双引号的字符</li></ul></li></ul></li></ul> <h4 id="优化原则"><a href="#优化原则" class="header-anchor">#</a> 优化原则</h4> <ul><li><p>测试性能的方法</p> <ul><li><p>使用ipyhon来测试正则表达式</p> <ul><li>win+R——输入 ipython</li> <li><a href="http://t.zoukankan.com/lmg-jie-p-9171999.html" target="_blank" rel="noopener noreferrer">ipython使用技巧<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-py extra-class"><pre class="language-py"><code>In <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">import</span> re
In <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> x <span class="token operator">=</span> <span class="token string">'-'</span> <span class="token operator">*</span> <span class="token number">1000000</span> <span class="token operator">+</span> <span class="token string">'abc'</span>
In <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">:</span> timeit re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
<span class="token number">480</span> µs ± <span class="token number">8.06</span> µs per loop <span class="token punctuation">(</span>mean ± std<span class="token punctuation">.</span> dev<span class="token punctuation">.</span> of <span class="token number">7</span> runs<span class="token punctuation">,</span> <span class="token number">1000</span> loops each<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>可以通过前面 regex101.com 查看正则和文本匹配的次数</p></li></ul></li> <li><p>提前编译好正则</p> <ul><li>compile</li></ul></li> <li><p>尽量准确表示匹配范围</p> <ul><li>我们可以写成<code>“[^&quot;]+”</code>。使用<code>[^&quot;]</code>要比使用点号好很多</li></ul></li> <li><p>提取出公共部分</p> <ul><li>因为 NFA 以正则为主导，会导致字符串中的某些部分重复匹配多次，影响效率。</li> <li><code>(abcd|abxy)</code>这样的表达式，可以优化成<code>ab(cd|xy)</code></li> <li><code>(^this|^that) is</code>——<code>^th(is|at) is</code>——锚点部分独立处理</li> <li><code>this|that</code>——<code>th(?:is|at)</code></li></ul></li> <li><p>出现可能性大的放左边</p> <ul><li>由于正则是从左到右看的，所有在分支中，把可能性大的放到左边</li></ul></li> <li><p>在必要时才使用子组</p> <ul><li>在正则中，括号可以用于归组，但如果某部分后续不会再用到，就不需要保存成子组。</li> <li><code>(?:)</code>——不保存子组</li></ul></li> <li><p>警惕嵌套的子组重复</p> <ul><li><code>(.*)*</code>这个正则，匹配的次数会呈指数级增长</li></ul></li> <li><p>避免不同分支重复匹配</p></li></ul> <h4 id="示例-4"><a href="#示例-4" class="header-anchor">#</a> 示例</h4> <p>针对这个示例，NFA 引擎的匹配过程</p> <blockquote><p>文本：a12----开始部分用△表示，结束部分用○表示</p> <p>即：△a12○</p> <p>正则：^(?=[a-z])[a-z0-9]+$</p></blockquote> <blockquote><p>^——△</p> <p>(?=[a-z])——a</p> <p>[a-z0-9]——△——a12</p> <p>$——○</p></blockquote> <h2 id="正则解决常见问题"><a href="#正则解决常见问题" class="header-anchor">#</a> 正则解决常见问题</h2> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%AD%A3%E5%88%99%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6.webp" alt=""></p> <h4 id="正则处理问题的基本思路"><a href="#正则处理问题的基本思路" class="header-anchor">#</a> 正则处理问题的基本思路</h4> <ol><li><p>比如将问题分解成多个小问题，每个小问题见招拆招。</p></li> <li><p>某个位置上可能有多个字符的话，就⽤字符组。</p></li> <li><p>某个位置上有多个字符串的话，就⽤多选结构。</p></li> <li><p>出现的次数不确定的话，就⽤量词。</p></li> <li><p>对出现的位置有要求的话，就⽤锚点锁定位置。</p></li> <li><p>在正则中比较难的是某些字符不能出现，这个情况又可以进一步分为以下两种</p> <ul><li>组成中不能出现
<ul><li>要查找的内容中不能出现某些字符——<code>[^aeiou]</code>——不能出现元音</li> <li>例如 要求密码6位，但是不能有两个连续数字出现
<ul><li><code>^((?!\d\d)\w){6}$</code></li> <li><code>(?!\d\d)</code>——代表右边不能是两个数字，但是左边没有正则，即为空字符串</li></ul></li></ul></li> <li>要查找的内容前后不能出现——环视</li></ul></li></ol> <h4 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h4> <ul><li><p>匹配数字</p> <ul><li>数字—— <code>\d</code> 或<code>[0-9]</code></li> <li>连续的多个数字—— <code>\d+</code> 或<code>[0-9]+</code></li> <li>n 位数字—— <code>\d{n}</code>。</li> <li>至少 n 位数据——<code>\d{n,}</code>。</li> <li>m-n 位数字—— <code>\d{m,n}</code>。</li></ul></li> <li><p>匹配正数、负数、小数（浮点数）</p> <ul><li>3，3.14，-3，+2.7，20.12
<ul><li><code>[+-]?\d+[.]?\d*</code></li> <li><code>[+-]?\d+(?:\.\d+)?</code> <ul><li>——<code>(?:)</code>表示不保留子组——<code>\.</code>表示转义<code>.</code></li></ul></li></ul></li> <li>.5，+.5——考虑这种极端情况（负号的时候整数部分不能没有，而正数的时候整数部分可以没有）
<ul><li>正数：<code>+?(?:\d+(?:\.\d+)?|\.\d+)</code> <ul><li><code>\d+(?:\.\d+)?</code>和<code>\.\d+</code>两个分支</li></ul></li> <li>负数：<code>-\d+(?:\.\d+)?</code></li> <li>组合：<code>-\d+(?:\.\d+)?|\+?(?:\d+(?:\.\d+)?|\.\d+)</code>——正数和负数两个分支</li></ul></li></ul></li> <li><p>十六进制数</p> <ul><li><code>[0-9a-fA-F]+</code></li></ul></li> <li><p>手机号码</p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%89%8B%E6%9C%BA%E5%8F%B7.webp" alt=""></p> <ul><li>限制前两位
<ul><li><code>1[3-9]\d{9}</code></li></ul></li> <li>限制前三位
<ul><li>13:<code>13[0-9]\d{8}</code></li> <li>14:<code>14[5-9]\d{8}</code></li> <li>15:<code>15[0-35-9]\d{8}</code></li> <li>16:<code>16[2567]\d{8}</code></li> <li>17:<code>17[0-8]\d{8}</code></li> <li>18:<code>18[0-9]\d{8}</code></li> <li>19:<code>19[1389]\d{8}</code></li> <li>组合：<code>1(?:3[0-9]|4[5-9]|5[0-35-9]|6[2567]|7[0-8]|8[0-9]|9[1389])\d{8}</code></li></ul></li></ul></li> <li><p>身份证号码</p> <ul><li>第一代是 15 位，第二代是 18 位;如果是 18 位，最后一位可以是 X（或 x），两代开头都不能是 0</li> <li>15:<code>[1-9]\d{14}</code></li> <li>18:<code>[1-9]\d{16}[\dXx]</code></li> <li>组合：<code>[1-9]\d{14}(\d{2}[\dXx])?</code></li></ul></li> <li><p>邮政编码</p> <ul><li>邮编一般为 6 位数字,需要加断言</li> <li><code>(?&lt;!\d)\d{6}(?!\d)</code>——左边不是数字，右边不是数字</li></ul></li> <li><p>QQ号码</p> <ul><li>QQ 号不能以 0 开头，最长的有 10 位，最短的从 10000（5 位）开始</li> <li><code>[1-9]\d{4,9}?</code>——<code>\d{4,9}</code>,表示数字出现4次到9次</li></ul></li> <li><p>中文字符</p> <ul><li>中文属于多字节 Unicode 字符，通过 Unicode 属性，但有一些语言是不支持这种属性的</li> <li>另外一个办法，就是码值的范围，中文的范围是 4E00 - 9FFF 之间</li> <li>Python，Java，JavaScript 中，Unicode 可以写成 \u码值 来表示，即匹配中文的正则可以写成 [\u4E00-\u9FFF]，在 PHP 中使用，Unicode 就需要写成 \u{码值} 的样式。</li></ul> <div class="language-pyt extra-class"><pre class="language-text"><code># 测试环境，Python3
&gt;&gt;&gt; import re
&gt;&gt;&gt; reg = re.compile(r'[\u4E00-\u9FFF]')
&gt;&gt;&gt; reg.findall(&quot;和伟忠一起学正则regex&quot;)
['和', '伟', '忠', '一', '起', '学', '正', '则']
</code></pre></div></li> <li><p>IPV4地址</p> <ul><li>IPv4 地址通常表示成 27.86.1.226 的样式，4 个数字用点隔开，每一位范围是 0-255</li> <li>简单版：<code>\d{1,3}(?:\.\d{1,3}){3}</code></li> <li>按位数考虑
<ul><li>1位——<code>1.</code>--<code>01.</code>--<code>001.</code> <ul><li><code>0{0,2}\d</code></li></ul></li> <li>2位——<code>10.</code>--<code>010.</code> <ul><li><code>0?\d\d</code></li></ul></li> <li>3位——<code>100.</code>--<code>255.</code> <ul><li><code>1\d\d|2[0-5][0-5]</code></li></ul></li> <li>组合——<code>0{0,2}\d|0?\d\d|1\d\d|2[0-5][0-5]</code>=x</li> <li>组合改进——长的分支放到左边——<code>1\d\d|2[0-5][0-5]|0?\d\d|0{0,2}\d</code>=x</li></ul></li> <li>加上点——x.x.x.x
<ul><li><code>(?:x)(?:\.(?:x)){3}</code></li> <li><code>(?:1\d\d|2[0-5][0-5]|0?\d\d|0{0,2}\d)(?:\.(?:1\d\d|2[0-5][0-5]|0?\d\d|0{0,2}\d)){3}</code></li></ul></li></ul></li> <li><p>日期</p> <ul><li>日期格式  yyyy-mm-dd</li> <li>简单：<code>\d{4}-\d{2}-\d{2}</code></li> <li>复杂：考虑月份 1-12，一位时0可带可不带；日期 1-31（像 30，29,28这种应该交给程序来完成，不要用正则完成所有的事情）
<ul><li>年：<code>\d{4}</code></li> <li>月：<code>1[0-2]|0?[1-9]</code>——两位的写在前面</li> <li>日：<code>[12]\d|3[01]|0?[1-9]</code></li> <li>组合：<code>\d{4}-(?:1[0-2]|0?[1-9])-(?:[12]\d|3[01]|0?[1-9])</code></li></ul></li></ul></li> <li><p>时间</p> <ul><li>24小时制——23:24</li> <li>小时：0-23；分钟：0-59</li> <li><code>(?:2[0-3]|1[0-9]|0?[0-9]):(?:[1-5][0-9|0?[0-9]])</code></li> <li>12小时制——11:59</li> <li>小时：0-11；分钟：0-59</li> <li><code>(?:1[01]|0?[0-9]):(?:[1-5][0-9|0?[0-9]])</code></li></ul></li> <li><p>邮箱</p> <ul><li>格式是 用户名 @主机名，用户名部分通常可以有英文字母，数字，下划线，点等组成，但其中点不能在开头，也不能重复出现</li> <li>简单版：<code>[\w.]+@[\w]+\.[\w]+</code></li></ul></li> <li><p>网页标签</p> <ul><li>配对出现的标签，不区分大小写,title
<ul><li><code>(?si)&lt;title.*?&gt;.*&lt;\/title&gt;</code></li></ul></li> <li>提取引号里面的内容
<ul><li><code>&quot;.+&quot;</code></li> <li><code>&quot;[^&quot;]+&quot;</code>——带<code>&quot;&quot;</code></li> <li><code>(?&lt;=&quot;)[^&quot;]+(?=&quot;)</code>——不带<code>&quot;&quot;</code></li></ul></li> <li>提取尖括号&lt;&gt;里面的内容
<ul><li><code>&lt;[^&gt;]+&gt;</code>——带<code>&lt;&gt;</code></li> <li><code>(?&lt;=&lt;)[^&gt;]+(?=&gt;)</code>——不带<code>&lt;&gt;</code></li></ul></li></ul></li></ul> <h2 id="从编程语言的角度来理解正则表达式"><a href="#从编程语言的角度来理解正则表达式" class="header-anchor">#</a> 从编程语言的角度来理解正则表达式</h2> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80.webp" alt=""></p> <blockquote><p>使用第 4 代语言来描述问题，而无需花费大量时间，去考虑具体的处理逻辑和算法实现，处理逻辑和算法实现是由编译器（Compiler）或解释器（Interpreter）这样的语言解析引擎来负责。</p></blockquote> <ul><li>正则表达式属于<strong>声明式编程范式</strong></li></ul> <blockquote><p>声明式编程范式，主要是模拟人脑思维的过程。声明式重目标、轻过程，专注问题的分析和表达，而不是算法实现。它不用指明执行顺序，属于目标导向，强调的是定义问题的描述——即“做什么”，因而目标是显性而算法是隐性的。</p></blockquote> <ul><li><ul><li>因此，从编程范式的角度来看：</li> <li>声明式编程的世界观是：程序是由若干目标任务组成的有序列表；</li> <li>声明式编程的方法论是：用语法元素来描述任务，由解析引擎转化为指令并执行。</li></ul></li> <li><p>正则表达式的语法元素本质上就是程序逻辑和算法</p> <ul><li><p>正则表达式中的星号量词“*”这一元字符，就是高级语言的处理逻辑“循环结构”的体现。具体来说，星号量词“*”代表的是不定次数循环结构，而前后多个星号量词的嵌套就是多层不定次数循环结构的嵌套；</p></li> <li><p>或运算符，也就是竖线“|”这个元字符，就是高级语言的处理逻辑“分支结构”的体现；</p></li> <li><p>而用于分组的圆括号“()”，就相当于高级语言的作用域。</p></li> <li><p>而当或运算符“|”出现在由星号量词“*”所限定的分组圆括号“()”中时，其实就是在“循环结构”中嵌套了“分支结构”；</p></li> <li><p>而如果进一步地，“循环结构”所嵌套的“分支结构”中的某个分支，又被某个星号量词“*”所限定，那么则相当于“循环结构”所嵌套的“分支结构”又嵌套了“循环结构”。</p></li> <li><p><code>(张三|李四 *)*</code></p> <p><img src="/assets/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E5%BC%A0%E4%B8%89%E6%9D%8E%E5%9B%9B.webp" alt=""></p></li></ul></li></ul> <p>​</p></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E7%9F%A5%E8%AF%86" title="标签">#知识</a><a href="/tags/?tag=%E6%8A%80%E6%9C%AF" title="标签">#技术</a><a href="/tags/?tag=%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F" title="标签">#正则表达式</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023 07 3</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/343c9a/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Linux面试题</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/343c9a/" class="prev">Linux面试题</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/0446de/"><div>
            数据层解决方案
            <!----></div></a> <span class="date">07-03</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/e76fff/"><div>
            第三方技术整合
            <!----></div></a> <span class="date">07-03</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/cd183e/"><div>
            原理篇
            <!----></div></a> <span class="date">07-03</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1693849288@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/diana-devil" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://y.qq.com/n/ryqq/playlist/3202075040" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2023
    <span>by 凉冰 </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><!----><canvas id="vuepress-canvas-cursor"></canvas><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/bgm/G_E_M_ 邓紫棋 - FIND YOU.ogg" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/bgm/GEM.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/bgm/GEM.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>FIND YOU</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>G_E_M_ 邓紫棋</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/assets/js/app.3ee2b30c.js" defer></script><script src="/assets/js/2.fc657b59.js" defer></script><script src="/assets/js/143.ad7b5934.js" defer></script><script src="/assets/js/3.e0ec9727.js" defer></script>
  </body>
</html>
