<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring 基础 | 凉冰的手记</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/192.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#2196f3">
    <meta name="description" content="记录生活的精彩瞬间，记录一个程序猿的成长！">
    <meta name="keywords" content="琐事，小记">
    <meta name="author" href="凉冰">
    <meta name="theme-color" content="#2196f3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.59ed400b.css" as="style"><link rel="preload" href="/assets/js/app.3ee2b30c.js" as="script"><link rel="preload" href="/assets/js/2.fc657b59.js" as="script"><link rel="preload" href="/assets/js/64.86f8647c.js" as="script"><link rel="preload" href="/assets/js/3.e0ec9727.js" as="script"><link rel="prefetch" href="/assets/js/10.eb4f1714.js"><link rel="prefetch" href="/assets/js/100.60572966.js"><link rel="prefetch" href="/assets/js/101.d94775a6.js"><link rel="prefetch" href="/assets/js/102.354c87f2.js"><link rel="prefetch" href="/assets/js/103.0322d8d3.js"><link rel="prefetch" href="/assets/js/104.330ce470.js"><link rel="prefetch" href="/assets/js/105.f2c0cf7b.js"><link rel="prefetch" href="/assets/js/106.9b15e481.js"><link rel="prefetch" href="/assets/js/107.f83846c8.js"><link rel="prefetch" href="/assets/js/108.fd868043.js"><link rel="prefetch" href="/assets/js/109.144984d2.js"><link rel="prefetch" href="/assets/js/11.1f4ed2b0.js"><link rel="prefetch" href="/assets/js/110.393075aa.js"><link rel="prefetch" href="/assets/js/111.8e2be411.js"><link rel="prefetch" href="/assets/js/112.f5db1301.js"><link rel="prefetch" href="/assets/js/113.c5a49956.js"><link rel="prefetch" href="/assets/js/114.f7400c29.js"><link rel="prefetch" href="/assets/js/115.0d4d9691.js"><link rel="prefetch" href="/assets/js/116.5e2d0bba.js"><link rel="prefetch" href="/assets/js/117.b9b6cd5c.js"><link rel="prefetch" href="/assets/js/118.cfffe6ca.js"><link rel="prefetch" href="/assets/js/119.faeb006b.js"><link rel="prefetch" href="/assets/js/12.c55c2945.js"><link rel="prefetch" href="/assets/js/120.2c87041a.js"><link rel="prefetch" href="/assets/js/121.6d6d525b.js"><link rel="prefetch" href="/assets/js/122.a378a709.js"><link rel="prefetch" href="/assets/js/123.8a44d7e0.js"><link rel="prefetch" href="/assets/js/124.eef03f70.js"><link rel="prefetch" href="/assets/js/125.20627b3b.js"><link rel="prefetch" href="/assets/js/126.02bdd70b.js"><link rel="prefetch" href="/assets/js/127.6aaf85c7.js"><link rel="prefetch" href="/assets/js/128.2f2f6b78.js"><link rel="prefetch" href="/assets/js/129.b1f7d667.js"><link rel="prefetch" href="/assets/js/13.b5382928.js"><link rel="prefetch" href="/assets/js/130.aadb5b72.js"><link rel="prefetch" href="/assets/js/131.0a0ad3b4.js"><link rel="prefetch" href="/assets/js/132.a05a0c00.js"><link rel="prefetch" href="/assets/js/133.584b8785.js"><link rel="prefetch" href="/assets/js/134.ab61764f.js"><link rel="prefetch" href="/assets/js/135.ccae4853.js"><link rel="prefetch" href="/assets/js/136.38fdaa61.js"><link rel="prefetch" href="/assets/js/137.502d74c0.js"><link rel="prefetch" href="/assets/js/138.12a12ee7.js"><link rel="prefetch" href="/assets/js/139.5ed042c0.js"><link rel="prefetch" href="/assets/js/14.9bf49d25.js"><link rel="prefetch" href="/assets/js/140.32ffb0bc.js"><link rel="prefetch" href="/assets/js/141.3b99bc3f.js"><link rel="prefetch" href="/assets/js/142.afd3e1e7.js"><link rel="prefetch" href="/assets/js/143.ad7b5934.js"><link rel="prefetch" href="/assets/js/144.7bdbdbd9.js"><link rel="prefetch" href="/assets/js/145.3f68756b.js"><link rel="prefetch" href="/assets/js/146.a48f80c3.js"><link rel="prefetch" href="/assets/js/147.eb3a30a3.js"><link rel="prefetch" href="/assets/js/148.563f4279.js"><link rel="prefetch" href="/assets/js/149.7627333e.js"><link rel="prefetch" href="/assets/js/15.47e2fe44.js"><link rel="prefetch" href="/assets/js/150.7cf4b6fd.js"><link rel="prefetch" href="/assets/js/151.200e2d36.js"><link rel="prefetch" href="/assets/js/152.68d5a6f8.js"><link rel="prefetch" href="/assets/js/153.4019d1b1.js"><link rel="prefetch" href="/assets/js/154.7c56b873.js"><link rel="prefetch" href="/assets/js/155.8a895428.js"><link rel="prefetch" href="/assets/js/156.9a106f9c.js"><link rel="prefetch" href="/assets/js/157.b585e3f5.js"><link rel="prefetch" href="/assets/js/158.a9ffbcc1.js"><link rel="prefetch" href="/assets/js/159.9bd41101.js"><link rel="prefetch" href="/assets/js/16.709e62a0.js"><link rel="prefetch" href="/assets/js/17.b149e3eb.js"><link rel="prefetch" href="/assets/js/18.5b57a250.js"><link rel="prefetch" href="/assets/js/19.d2aedd09.js"><link rel="prefetch" href="/assets/js/20.13fd637f.js"><link rel="prefetch" href="/assets/js/21.91dc71fa.js"><link rel="prefetch" href="/assets/js/22.b44ebaaf.js"><link rel="prefetch" href="/assets/js/23.85274bf7.js"><link rel="prefetch" href="/assets/js/24.fdcf9dad.js"><link rel="prefetch" href="/assets/js/25.d7834455.js"><link rel="prefetch" href="/assets/js/26.149bb0bb.js"><link rel="prefetch" href="/assets/js/27.fe47c303.js"><link rel="prefetch" href="/assets/js/28.106a053b.js"><link rel="prefetch" href="/assets/js/29.5cbd445a.js"><link rel="prefetch" href="/assets/js/30.bc8be6db.js"><link rel="prefetch" href="/assets/js/31.776bb22e.js"><link rel="prefetch" href="/assets/js/32.38f1617c.js"><link rel="prefetch" href="/assets/js/33.764d5e8e.js"><link rel="prefetch" href="/assets/js/34.ee4b3664.js"><link rel="prefetch" href="/assets/js/35.0c8a4552.js"><link rel="prefetch" href="/assets/js/36.3114f265.js"><link rel="prefetch" href="/assets/js/37.6623c809.js"><link rel="prefetch" href="/assets/js/38.47b2ae3c.js"><link rel="prefetch" href="/assets/js/39.66477360.js"><link rel="prefetch" href="/assets/js/4.7bd8ec5a.js"><link rel="prefetch" href="/assets/js/40.3c1369b3.js"><link rel="prefetch" href="/assets/js/41.ba422769.js"><link rel="prefetch" href="/assets/js/42.d8feaaee.js"><link rel="prefetch" href="/assets/js/43.7a023784.js"><link rel="prefetch" href="/assets/js/44.578065d4.js"><link rel="prefetch" href="/assets/js/45.599d10a9.js"><link rel="prefetch" href="/assets/js/46.68c58a57.js"><link rel="prefetch" href="/assets/js/47.a0e48134.js"><link rel="prefetch" href="/assets/js/48.a8edc4f3.js"><link rel="prefetch" href="/assets/js/49.a98d9884.js"><link rel="prefetch" href="/assets/js/5.bc317ee9.js"><link rel="prefetch" href="/assets/js/50.7001c5b8.js"><link rel="prefetch" href="/assets/js/51.43d17700.js"><link rel="prefetch" href="/assets/js/52.9ad031a9.js"><link rel="prefetch" href="/assets/js/53.8347b740.js"><link rel="prefetch" href="/assets/js/54.73a1db12.js"><link rel="prefetch" href="/assets/js/55.06ac4334.js"><link rel="prefetch" href="/assets/js/56.caf42a7a.js"><link rel="prefetch" href="/assets/js/57.c8af04ff.js"><link rel="prefetch" href="/assets/js/58.259c0df6.js"><link rel="prefetch" href="/assets/js/59.4a73da6e.js"><link rel="prefetch" href="/assets/js/6.da0024ba.js"><link rel="prefetch" href="/assets/js/60.c88072d5.js"><link rel="prefetch" href="/assets/js/61.a3a06ae4.js"><link rel="prefetch" href="/assets/js/62.e5adc7b0.js"><link rel="prefetch" href="/assets/js/63.48cc1305.js"><link rel="prefetch" href="/assets/js/65.005e380e.js"><link rel="prefetch" href="/assets/js/66.67bff065.js"><link rel="prefetch" href="/assets/js/67.e12b4c13.js"><link rel="prefetch" href="/assets/js/68.0161e8c6.js"><link rel="prefetch" href="/assets/js/69.5aaf7b82.js"><link rel="prefetch" href="/assets/js/7.1d00dc1d.js"><link rel="prefetch" href="/assets/js/70.6a645155.js"><link rel="prefetch" href="/assets/js/71.001a3225.js"><link rel="prefetch" href="/assets/js/72.2850a293.js"><link rel="prefetch" href="/assets/js/73.d250e0c6.js"><link rel="prefetch" href="/assets/js/74.dafa5bc3.js"><link rel="prefetch" href="/assets/js/75.22c6b92e.js"><link rel="prefetch" href="/assets/js/76.24bc0a51.js"><link rel="prefetch" href="/assets/js/77.e38213b8.js"><link rel="prefetch" href="/assets/js/78.a22de10e.js"><link rel="prefetch" href="/assets/js/79.b0e7fed2.js"><link rel="prefetch" href="/assets/js/8.b16448cb.js"><link rel="prefetch" href="/assets/js/80.67472401.js"><link rel="prefetch" href="/assets/js/81.1df69f3e.js"><link rel="prefetch" href="/assets/js/82.022c9317.js"><link rel="prefetch" href="/assets/js/83.8894e626.js"><link rel="prefetch" href="/assets/js/84.e9f038d8.js"><link rel="prefetch" href="/assets/js/85.ff3971f7.js"><link rel="prefetch" href="/assets/js/86.24e53411.js"><link rel="prefetch" href="/assets/js/87.95b56dc2.js"><link rel="prefetch" href="/assets/js/88.4557cc7d.js"><link rel="prefetch" href="/assets/js/89.1337890b.js"><link rel="prefetch" href="/assets/js/9.1b8d4154.js"><link rel="prefetch" href="/assets/js/90.29d24983.js"><link rel="prefetch" href="/assets/js/91.84b2e3eb.js"><link rel="prefetch" href="/assets/js/92.23e2abeb.js"><link rel="prefetch" href="/assets/js/93.162e9b76.js"><link rel="prefetch" href="/assets/js/94.9ada79ba.js"><link rel="prefetch" href="/assets/js/95.5cc24e13.js"><link rel="prefetch" href="/assets/js/96.0ee67f9e.js"><link rel="prefetch" href="/assets/js/97.9f98bf38.js"><link rel="prefetch" href="/assets/js/98.58600000.js"><link rel="prefetch" href="/assets/js/99.f8a36889.js">
    <link rel="stylesheet" href="/assets/css/0.styles.59ed400b.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/恶魔.webp" alt="凉冰的手记" class="logo"> <span class="site-name can-hide">凉冰的手记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/Java-C/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/back/javaWeb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/back/sql/" class="nav-link">数据库</a></li><li class="dropdown-item"><!----> <a href="/back/SSM/" class="nav-link">SSM</a></li><li class="dropdown-item"><!----> <a href="/back/SpringBoot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/back/Microservice/" class="nav-link">微服务</a></li></ul></div></div><div class="nav-item"><a href="/Algorithm/" class="nav-link">算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology/Git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/technology/Linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/pages/b5d182/" class="nav-link">正则表达式</a></li></ul></div></div><div class="nav-item"><a href="/pages/edb686/" class="nav-link">面试</a></div><div class="nav-item"><a href="/pages/2aa63b/" class="nav-link">项目记录</a></div><div class="nav-item"><a href="/pages/1b70fb/" class="nav-link">DOA</a></div><div class="nav-item"><a href="/pages/d591da/" class="nav-link">精彩瞬间</a></div><div class="nav-item"><a href="/pages/961a83/" class="nav-link">任意门</a></div><div class="nav-item"><a href="https://github.com/diana-devil/diana-devil.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/devil.jpg"> <div class="blogger-info"><h3>凉冰</h3> <span>奋勇向前的可爱小恶魔！</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/Java-C/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/back/javaWeb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/back/sql/" class="nav-link">数据库</a></li><li class="dropdown-item"><!----> <a href="/back/SSM/" class="nav-link">SSM</a></li><li class="dropdown-item"><!----> <a href="/back/SpringBoot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/back/Microservice/" class="nav-link">微服务</a></li></ul></div></div><div class="nav-item"><a href="/Algorithm/" class="nav-link">算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology/Git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/technology/Linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/pages/b5d182/" class="nav-link">正则表达式</a></li></ul></div></div><div class="nav-item"><a href="/pages/edb686/" class="nav-link">面试</a></div><div class="nav-item"><a href="/pages/2aa63b/" class="nav-link">项目记录</a></div><div class="nav-item"><a href="/pages/1b70fb/" class="nav-link">DOA</a></div><div class="nav-item"><a href="/pages/d591da/" class="nav-link">精彩瞬间</a></div><div class="nav-item"><a href="/pages/961a83/" class="nav-link">任意门</a></div><div class="nav-item"><a href="https://github.com/diana-devil/diana-devil.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaWeb</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>SSM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/b2f859/" aria-current="page" class="active sidebar-link">Spring 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/b2f859/#spring-优势" class="sidebar-link">Spring 优势</a></li><li class="sidebar-sub-header level2"><a href="/pages/b2f859/#spring-体系结构" class="sidebar-link">Spring 体系结构</a></li><li class="sidebar-sub-header level2"><a href="/pages/b2f859/#spring-开发步骤" class="sidebar-link">Spring 开发步骤</a></li><li class="sidebar-sub-header level2"><a href="/pages/b2f859/#spring重点配置" class="sidebar-link">Spring重点配置</a></li><li class="sidebar-sub-header level2"><a href="/pages/b2f859/#spring注解开发" class="sidebar-link">Spring注解开发</a></li><li class="sidebar-sub-header level2"><a href="/pages/b2f859/#spring-集成junit" class="sidebar-link">Spring 集成Junit</a></li><li class="sidebar-sub-header level2"><a href="/pages/b2f859/#spring集成web" class="sidebar-link">Spring集成Web</a></li><li class="sidebar-sub-header level2"><a href="/pages/b2f859/#spring-aop" class="sidebar-link">Spring -AOP</a></li><li class="sidebar-sub-header level2"><a href="/pages/b2f859/#spring-事务控制" class="sidebar-link">Spring 事务控制</a></li></ul></li><li><a href="/pages/1d17ee/" class="sidebar-link">SpringMVC-XML开发</a></li><li><a href="/pages/ee4b7e/" class="sidebar-link">SpringMVC-注解开发</a></li><li><a href="/pages/3c9c2a/" class="sidebar-link">MybatisPlus</a></li><li><a href="/pages/f036b6/" class="sidebar-link">SSM整合—XML开发</a></li><li><a href="/pages/e67134/" class="sidebar-link">SSM整合—注解开发</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微服务</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E5%90%8E%E7%AB%AF" title="分类" data-v-06225672>后端</a></li><li data-v-06225672><a href="/categories/?category=SSM" title="分类" data-v-06225672>SSM</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/diana-devil" target="_blank" title="作者" class="beLink" data-v-06225672>凉冰</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-06-30</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Spring 基础<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="spring-优势"><a href="#spring-优势" class="header-anchor">#</a> Spring 优势</h2> <ol><li><p>方便解耦，简化开发（bean）</p> <ul><li>通过spring提供的<code>IOC</code>容器  可以将对象间的依赖关系交由spring进行控制。</li> <li>IOC :使用对象时，由主动new产生对象转换为由<strong>外部</strong>提供对象,此过程中对象创建控制权由程序转移到外部，此思想称为控制反转。</li></ul></li> <li><p><code>AOP</code>编程支持</p> <ul><li>通过Spring的AOP功能，方便的面向切面编程，许多不容易用传统OOP（面向对象编程）实现的功能都可以通过AOP实现。</li></ul></li> <li><p>声明式事务的支持</p> <ul><li>通过声明式灵活的进行事务管理，提高开发效率和质量。</li></ul></li> <li><p>方便程序的测试   （Spring-junit）</p> <ul><li>可以用非容器依赖的编程方式进行几乎所有的测试工作。</li></ul></li> <li><p>方便集成各种优秀框架（Spring-mybatis）</p></li> <li><p>降低JavaEE API的使用难度（JDBC模板）</p> <ul><li>Spirng对JavaEE API 进行了薄薄的封装层，提供给用户一个模板来使用。</li></ul></li> <li><p>Java 源码是经典学习范例</p> <ul><li>Spring 的源代码设计精妙，值得学习。</li></ul></li></ol> <h2 id="spring-体系结构"><a href="#spring-体系结构" class="header-anchor">#</a> Spring 体系结构</h2> <p><img src="/assets/%E5%90%8E%E7%AB%AF/SSM/Spring%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.png" alt="Spring体系结构"></p> <h2 id="spring-开发步骤"><a href="#spring-开发步骤" class="header-anchor">#</a> Spring 开发步骤</h2> <ol><li><p>导入坐标。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.0.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>创建Bean，Dao(Mapper)目录下的接口加实现类。</p></li> <li><p>创建applicationContext.xml,并进行相关配置。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.diana.Dao_Mapper.impl.UserImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>创建ApplicationContext对象，使用getBean方法得到对象。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ApplicationContext</span> app<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> app<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h2 id="spring重点配置"><a href="#spring重点配置" class="header-anchor">#</a> Spring重点配置</h2> <blockquote><ol><li><p>&lt;bean&gt; 标签</p> <div class="language-xml extra-class"><pre class="language-xml"><code>* id属性： 在容器中Bean实例的唯一标识，不允许重复

* class属性： 要实例化的Bean的全限定名

* scope属性：Bean的作用范围，常用是Singleton(默认)和prototype

* init-method属性: 初始化方法

* destroy-method属性: 销毁方法
</code></pre></div></li> <li><p>set方法注入   使用&lt;property&gt;标签         自己开发的模块 推荐使用set方法注入</p> <blockquote><ul><li><p>name是属性名称</p> <div class="language-xml extra-class"><pre class="language-xml"><code>name=&quot;user&quot;,  user是setUser 的set后面的部分的小写，即  setUser——User——user  一般来说即属性名 user
</code></pre></div></li> <li><p>普通数据类型-----value</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>张三<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>集合数据类型-----list，map，props，set,array</p> <ul><li><p>list</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>strList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>aaa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>bb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>ccc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>map</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>key1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>key2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>props</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ppp1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ppp2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ppp3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li> <li><p>引用数据类型-----ref</p> <div class="language-xml extra-class"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></blockquote></li> <li><p>&lt;constructor-arg&gt;标签-- 有参构造函数注入    不推荐</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>&lt;import&gt; 标签：导入其他的Spring的分文件</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>applicationContext-insert.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token comment">&lt;!--注入方法--&gt;</span>
</code></pre></div></li> <li><p>加载外部配置property ,使用el表达式来获取值    ---引入数据源</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- el表达式 来获取配置文件信息--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource_c3p0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mchange.v2.c3p0.ComboPooledDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>组件扫描，配合注解开发使用</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.diana<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>实例化方法</p> <ul><li><p>无参构造</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.diana.Dao_Mapper.impl.UserImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>工厂静态方法实例化</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;user&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;com.diana.factory.StaticFactory&quot;</span> factory<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">&quot;getUser&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">//实例化bean  方式二  工厂静态方法实例化</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StaticFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>工厂实例方法实例化</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;factory&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;com.diana.factory.DynamicFactory&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;user&quot;</span> factory<span class="token operator">-</span>bean<span class="token operator">=</span><span class="token string">&quot;factory&quot;</span> factory<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">&quot;getUser&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
     <span class="token comment">//实例化bean  方式三  工厂实例方法实例化</span>
 <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DynamicFactory</span> <span class="token punctuation">{</span>
     <span class="token keyword">public</span>  <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

</code></pre></div></li> <li><p>使用FactoryBean实例化</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>使用<span class="token class-name">FactoryBean</span>实例化<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;user&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;com.diana.factory.UserFactoryBean&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
 <span class="token comment">//实例化bean  方式四  使用FactoryBean实例化</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserFactoryBean</span> <span class="token keyword">implements</span> <span class="token class-name">FactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

 <span class="token comment">//代替原始实例工厂中创建对象的方法</span>
 <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token comment">//得到Bean的类型</span>
 <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token comment">//是否单例   工厂一般都是单例    所有这个方法一般不写  默认单例</span>
 <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></li></ul></li></ol></blockquote> <h2 id="spring注解开发"><a href="#spring注解开发" class="header-anchor">#</a> Spring注解开发</h2> <p>在Dao_Mapper--impl--UserImpl  中</p> <img src="/assets/后端/SSM/Spring原始注解.png" alt="Spring原始注解" style="zoom:80%;"> <p>在demo-- UserController  ，config 中</p> <img src="/assets/后端/SSM/Spring新注解.png" alt="Spring新注解" style="zoom:80%;"> <p><strong>XML配置与注解配置对比</strong></p> <p><img src="/assets/%E5%90%8E%E7%AB%AF/SSM/XML%E4%B8%8E%E6%B3%A8%E8%A7%A3%E5%AF%B9%E6%AF%94.png" alt="XML与注解对比"></p> <h2 id="spring-集成junit"><a href="#spring-集成junit" class="header-anchor">#</a> Spring 集成Junit</h2> <blockquote><ol><li><p>导入spring集成Junit的坐标和Junit的坐标。</p> <ul><li>spring-context   spring-test 两个版本要一致</li> <li>junit 版本要在4.12 及以上</li></ul></li> <li><p>使用@Runwith注解替换原来的运行期</p></li> <li><p>使用@ContextConfiguration指定配置文件或配置类</p></li> <li><p>使用@Autowired注入需要测试的对象</p></li> <li><p>创建测试方法进行测试</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token comment">//@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)//配置文件方式</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">SpringConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//注解类方式</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringJuintTest</span> <span class="token punctuation">{</span>
                                                
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>
                                                
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">;</span>
                                                
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></blockquote> <h2 id="spring集成web"><a href="#spring集成web" class="header-anchor">#</a> Spring集成Web</h2> <p><strong>放到了SpringMVC项目下</strong></p> <blockquote><ol><li><p>ApplicationContext应用上下文获取方式</p> <ul><li><p>在web.xml中配置ContextLoaderListener监听器  (导入spring-web坐标)</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- spring web监听器--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--配置监听器  来自动加载Spring应用上下文--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>使用WebApplicationContextUtils获得应用上下文对象 ApplicationContext</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//调用Spring封装好的实现</span>
<span class="token comment">//得到servletContext  最大的域</span>
<span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ApplicationContext</span> app <span class="token operator">=</span> <span class="token class-name">WebApplicationContextUtils</span><span class="token punctuation">.</span><span class="token function">getWebApplicationContext</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>从容器中得到userService对象</p> <p>UserService userService = app.getBean(UserService.class);
userService.save();</p> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div></li></ol></blockquote> <h2 id="spring-aop"><a href="#spring-aop" class="header-anchor">#</a> Spring -AOP</h2> <p><strong>Aop 简化共性功能，方便开发</strong></p> <h4 id="一、aop的基础知识"><a href="#一、aop的基础知识" class="header-anchor">#</a> 一、AOP的基础知识</h4> <ol><li><p>什么是AOP</p> <blockquote><ul><li>AOP 是面向切面编程，是通过 <strong>预编译方式</strong>和<strong>运行期动态代理</strong>实现程序功能的统一维护的一种技术。
<ul><li>动态代理： 在不修改源码的基础上，对目标方法进行增强。作用：完成代码间的松耦合</li></ul></li> <li>利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各个部分之间的耦合度降低，提高程序的可重用性，提升开发效率。</li></ul></blockquote></li> <li><p>AOP的作用及其优势</p> <blockquote><ul><li><p>作用： 在程序运行期间，在不修改源码的情况下，对方法进行功能增强。</p></li> <li><p>优势：减少重复代码，提高开发效率，便于维护。</p></li></ul></blockquote></li> <li><p>AOP 流程</p> <blockquote><ul><li>一个目标方法和一个功能增强方法就被称为一个切面。</li> <li>将目标方法和功能增强方法 在运行时放到一起，达到功能增强的目的，同时达到松耦合的目的。</li> <li>目标方法（save，update，delete），功能增强方法（日志控制），源码分离，在配置文件中声明 运行时进行结合。</li></ul></blockquote> <p><img src="/assets/%E5%90%8E%E7%AB%AF/SSM/AOP%E7%AE%80%E7%AC%94%E7%94%BB.png" alt="AOP简笔画"></p></li> <li><p>AOP的动态代理技术</p> <blockquote><p>JDK动态代理 要求 目标对象必须有一个接口</p> <p>cglib动态代理 会生成一个目标对象的子类 从而实现动态代理</p></blockquote> <p><img src="/assets/%E5%90%8E%E7%AB%AF/SSM/AOP%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86.png" alt="AOP动态代理"></p></li> <li><p>AOP相关概念</p> <blockquote><ul><li>Target(目标对象)： 代理的目标对象。</li> <li>Proxy(代理)：一个类被AOP织入增强后，就产生一个结果代理类。</li> <li>Joinpoint（连接点）----&gt;（可以被增强的目标方法）： 所谓连接点是值那些被拦截到的点（方法）。在Spring中，这些点值得是方法，因为spring只支持方法类型的连接点。</li> <li>Pointcut（切入点/切点）----&gt;（你配置的，真正被增强的目标方法，是连接点的一部分）：所谓切入点是指我们要对哪些Joinpoint进行拦截的定义。</li> <li>Advice（通知/增强）----&gt;（用来增强目标方法的增强方法）： 所谓通知是指  拦截到Joinpoint之后 所要做的事情就是通知。</li> <li>Aspect（切面）：是切入点和通知的结合</li> <li>Weaving（织入）----&gt;（把切入点和通知结合的过程）：是指把<strong>增强</strong>应用到<strong>目标对象</strong>来<strong>创建新的代理对象</strong>的过程，采用配置文件实现，配置的过程就是织入的过程。spring采用动态代理织入，而AspecttJ 采用编译期织入和类装载期织入</li></ul></blockquote></li> <li><p>AOP开发明确事项</p> <blockquote><ul><li><p>需要编写的内容</p> <ul><li>编写核心业务代码（目标类的目标方法）</li> <li>编写切面类，切面类中有通知(增强功能方法)</li> <li>在配置文件中，配置织入关系，即将哪些通知与哪些切入点进行结合</li></ul></li> <li><p>AOP技术实现的内容（Spring帮你实现动态代理的过程）</p> <p>​		Spring框架监控切入点方法的执行。一旦监控到切入点方法被运行，使用代理机制，动态创建目标对象的代理对象，根据通知类别，在代理对象的对应位置，将通知对应的功能织入，完成完整的代码逻辑运行。</p></li> <li><p>AOP底层代理方式</p> <p>​	在Spring中，框架会根据目标类是否实现了接口来决定采用哪种动态代理的方式。</p> <p>​    有接口-----&gt; jdk动态代理       无接口----&gt;cglib动态代理</p></li></ul></blockquote></li></ol> <h4 id="二、基于xml的aop开发"><a href="#二、基于xml的aop开发" class="header-anchor">#</a> 二、基于XML的AOP开发</h4> <ol><li><p>开发步骤</p> <blockquote><ul><li><p>导入坐标</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- aspectj  aop 配置--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.aspectj<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aspectjweaver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.9.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>创建目标接口和目标类(内部有切点)</p></li> <li><p>创建切面类（内部有增强方法）</p></li> <li><p>将目标类和切面类的对象创建权交给spring容器</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 切面对象--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aspect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.diana.aop.MyAspect<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!--目标对象--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>target<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.diana.aop.impl.TargetImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>在配置文件中配置织入关系</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--     配置织入:  告诉spring框架  哪些方法（切点）需要进行哪些增强（前置，后置，……）--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 声明切面--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aspect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--切面：切点+通知--&gt;</span>
        <span class="token comment">&lt;!--对save方法 使用before方法 进行前置增强--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(public void com.diana.aop.impl.TargetImpl.save())<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>测试代码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:applicationContext-aop.xml&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//测试AOP</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> test_aop <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Target</span> target<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token comment">//测试前置增强方法</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        target<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用切点</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></blockquote></li> <li><p>切点表达式的写法</p> <blockquote><p>表达式语法     <code>execution（[修饰符] 返回值类型 包名 . 类名 . 方法名(参数)）</code></p> <ul><li><p>访问修饰符可以省略</p></li> <li><p>返回值类型、包名、类名、方法名可以使用※代表任意</p></li> <li><p>包名与类名之间一个点代表当前包下的类，两个点 .. (不推荐，效率低)表示当前包及其子包下的类</p></li> <li><p>参数列表可以使用两个点 表示任意个数，任意类型的参数列表</p> <img src="/assets/后端/SSM/切点表达式.png" alt="切点表达式" style="zoom:80%;"> <ol><li>表示aop当前包下的Target类的method方法，无参数，返回值类型为空。</li> <li>表示aop当前包下的Target类的所有方法，任意参数，返回值类型为空。</li> <li>表示aop当前包下的所有类的所有方法，任意参数，返回值类型为任意。-------最常用</li> <li>表示aop当前包及其子包下的所有类的所有方法，任意参数，返回值类型为任意。</li> <li>表示任意包当前包及其子包下的所有类的所有方法，任意参数，返回值类型为任意。</li></ol></li></ul></blockquote></li> <li><p>切点表达式的书写技巧</p> <p><img src="/assets/%E5%90%8E%E7%AB%AF/SSM/AOP%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B9%A6%E5%86%99%E6%8A%80%E5%B7%A7.png" alt="AOP切点表达式书写技巧"></p> <p>示例</p> <div class="language-xml extra-class"><pre class="language-xml"><code>//表示任意_service的所有的find_  方法
execution(* com.diana.*.*Service.find*(..))

//表示任意_service的所有的save方法
execution(* com.diana.*.*Service.save(..))
</code></pre></div></li> <li><p>AOP通知类型   <strong>环绕通知是重点</strong></p> <p><img src="/assets/%E5%90%8E%E7%AB%AF/SSM/AOP%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B.png" alt="AOP通知类型"></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--切面：切点+通知--&gt;</span>
<span class="token comment">&lt;!--对save方法 使用before方法 进行前置增强--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(public void com.diana.aop.impl.TargetImpl.save())<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!--对aop当前包及其子包下所有方法 使用before方法 进行前置增强--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.diana.aop..*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 后置增强--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-returning</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterReturning<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.diana.aop..*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 环绕增强--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>around</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>around<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.diana.aop..*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 异常抛出增强--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-throwing</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterThrowing<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.diana.aop..*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 最终增强--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>after<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.diana.aop..*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>切点表达式的抽取</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 抽取切点表达式--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mypointcut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.diana.aop..*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>


<span class="token comment">&lt;!-- 使用抽取后的切点表达式--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mypointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>around</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>around<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mypointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li></ol> <h4 id="三、基于注解的aop开发"><a href="#三、基于注解的aop开发" class="header-anchor">#</a> 三、基于注解的AOP开发</h4> <ol><li><p>开发步骤</p> <blockquote><ul><li><p>导入坐标</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- aspectj  aop 配置--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.aspectj<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aspectjweaver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.9.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>创建目标接口和目标类(内部有切点)</p></li> <li><p>创建切面类（内部有增强方法）</p></li> <li><p>将目标类和切面类的对象创建权交给spring容器（@Component）</p></li> <li><p><strong>在切面类中使用注解配置织入关系</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token string">&quot;aspect&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Aspect</span><span class="token comment">//标注当前类是一个切面类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect</span> <span class="token punctuation">{</span>

    <span class="token comment">//前置增强</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.diana.aop_ZJ..*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;myponitcut()&quot;</span><span class="token punctuation">)</span> <span class="token comment">//抽取切点表达式后使用</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;MyAspect.myponitcut()&quot;</span><span class="token punctuation">)</span><span class="token comment">//抽取切点表达式后使用</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;前置增强……&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//后置增强</span>
    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.diana.aop_ZJ..*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;后置增强……&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//环绕增强</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.diana.aop_ZJ..*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token comment">//Proceeding JoinPoint: 正在执行的连接点   切点</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;环绕前增强……&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//执行切点方法</span>
        <span class="token class-name">Object</span> proceed <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;环绕后增强……&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> proceed<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//异常抛出后增强</span>
    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.diana.aop_ZJ..*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;抛出了异常……&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//最终增强  不管有没有异常，都要执行</span>
    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.diana.aop_ZJ..*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;最终增强&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//定义切点表达式</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.diana.aop_ZJ..*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myponitcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>在配置文件中开启组件扫描和AOP的自动代理</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--配置组件扫描--&gt;</span>  <span class="token comment">&lt;!--配合注解开发使用--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.diana.aop_ZJ<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- aop 自动代理--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p><strong>使用纯注解开发  不留配置文件    --解决自动代理问题即可</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//启动AOP自动代理     代替 &lt;aop:aspectj-autoproxy/&gt;</span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span>

<span class="token comment">//&lt;!--配置组件扫描--&gt;  &lt;!--配合注解开发使用--&gt;</span>
<span class="token comment">//&lt;context:component-scan base-package=&quot;com.diana&quot;/&gt;</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.diana&quot;</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>测试代码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:applicationContext-aop_ZJ.xml&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> test_aop_ZJ <span class="token punctuation">{</span>
                
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">Target</span> target<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">TargetImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        target<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用切点</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></blockquote></li> <li><p>切点表达式的抽取</p> <blockquote><p>在切面内定义方法，在该方法上使用@Pointcut注解定义切点表达式，然后在增强注解中引用。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//定义切点表达式</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.diana.aop_ZJ..*.*(..))&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myponitcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>


<span class="token comment">//    @Before(&quot;execution(* com.diana.aop_ZJ..*.*(..))&quot;)</span>
<span class="token comment">//    @Before(&quot;myponitcut()&quot;) //抽取切点表达式后使用</span>
<span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;MyAspect.myponitcut()&quot;</span><span class="token punctuation">)</span><span class="token comment">//抽取切点表达式后使用</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;前置增强……&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote></li></ol> <h4 id="四、aop通知获得数据"><a href="#四、aop通知获得数据" class="header-anchor">#</a> 四、AOP通知获得数据</h4> <ul><li>项目在 <code>my_case_demo2</code>中，
<ul><li>测试代码<code>test-test_aop_param</code></li> <li>aop代码 <code>aop-getParam</code></li></ul></li> <li>获取切入点方法的参数
<ul><li>JoinPoint ：适用于前置，后置，最终通知，抛出异常后 通知</li> <li>ProceedJointPoint：适用于环绕通知, 可以修改参数，以到达某些目的</li></ul></li> <li>获取切入点方法返回值
<ul><li>后置</li> <li>环绕通知</li></ul></li> <li>获取切入点方法运行异常信息  （了解）
<ul><li>抛出异常后通知</li> <li>环绕通知</li></ul></li></ul> <h2 id="spring-事务控制"><a href="#spring-事务控制" class="header-anchor">#</a> Spring 事务控制</h2> <p><strong>测试代码在Controller层 一共三个，一个xml配置，一个半注解，一个纯注解</strong></p> <h4 id="一、编程式事务控制相关对象"><a href="#一、编程式事务控制相关对象" class="header-anchor">#</a> 一、编程式事务控制相关对象</h4> <ol><li><p><code>PlatformTransactionManager</code>  （我们要告诉spring 用哪个实现类）</p> <blockquote><ul><li><p>该接口是Spring的事务管理器，它里面提供了常用的操作事务的方法。</p> <ul><li>TransactionStatus getTransaction(TransactionDefination defination)     获取事务的状态信息</li> <li>void commit(TransactionStatus status)   提交事务</li> <li>void rollback(TransactionStatus status)  回滚事务</li></ul></li> <li><p>该接口对应不同的Dao层有不同的实现类。 jdbc，mybatis 是org.springframework.jdbc.datasource.DataSourceTransactionManager</p></li></ul></blockquote></li> <li><p><code>TransactionDefinition</code>  （我们要告诉spring 传入哪些参数，下面方法需要用到的）</p> <blockquote><ul><li><p><code>TransactionDefinition</code>它是事务的定义信息对象，里面如下方法</p> <ul><li><p><code>int getIsolationLevel()</code>                获得事务的隔离级别</p></li> <li><p><code>int getPropogationBehavior()</code>      获得事务的传播行为</p></li> <li><p><code>int getTimeout()</code>                               获得超时时间</p></li> <li><p><code>boolean isReadOnly()</code>                       是否只读</p></li></ul></li> <li><p>事务隔离级别</p> <p>设置隔离级别，可以解决事务并发产生的问题，如脏读、不可重复读和虚读。
ISOLATION_DEFAULT</p> <p>​	ISOLATION_READ_UNCOMMITTED</p> <p>​	ISOLATION_READ_COMMITTED</p> <p>​	ISOLATION_REPEATABLE_READ</p> <p>​	ISOLATION_SERIALIZABLE</p></li> <li><p>事务传播行为</p> <ul><li>REQUIRED： 如果当前没有事务，就新建一个事务，如果已经存在一个事务中，加入到这个事务中。一般的选择（默认值）</li> <li>SUPPORTS： 支持当前事务，如果当前没有事务，就以非事务方式执行（没有事务）</li> <li>MANDATORY：使用当前的事务，如果当前没有事务，就抛出异常</li> <li>REQUERS_NEW： 新建事务，如果当前在事务中，把当前事务挂起。</li> <li>NOT_SUPPORTED： 以非事务方式执行操作，如果当前存在事务，就把当前事务挂起</li> <li>NEVER： 以非事务方式运行，如果当前存在事务，抛出异常</li> <li>NESTED： 如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则执行 REQUIRED 类似的操作</li></ul></li> <li><p>超时和只读</p> <ul><li>超时时间：默认值是-1，没有超时限制。如果有，以秒为单位进行设置</li> <li>是否只读：建议查询时设置为只读</li></ul></li> <li><p><strong>设置事务回滚异常</strong></p> <ul><li><p>error系，运行时异常，Spring事务 默认才回滚，其他都不回滚，例如 IOException</p></li> <li><p>通过rollbackFor 设置除了默认回滚异常外的哪些异常时进行回滚</p></li></ul></li></ul></blockquote></li> <li><p><code>TransactionStatus</code>   （获取事务的运行状态）</p> <blockquote><p>TransactionStatus 接口提供的是事务具体的运行状态</p> <ul><li><code>boolean hasSavepoint()</code>   是否存储回滚点</li> <li><code>boolean isCompleted()</code>   事务是否完成</li> <li><code>boolean isNewTransaction()</code>   是否是新事务</li> <li><code>boolean isRollbackOnly()</code>   事务是否回滚</li></ul></blockquote></li></ol> <h4 id="二、基于xml的声明式事务控制"><a href="#二、基于xml的声明式事务控制" class="header-anchor">#</a> 二、基于XML的声明式事务控制</h4> <ol><li><p>声明式事务控制</p> <blockquote><ul><li><p>在spring配置文件中声明要处理处理事务。</p></li> <li><p>作用：事务管理不侵入开发的组件。业务逻辑和事务管理分开来。</p> <p>事务管理算是 增强方法，业务逻辑算是  目标方法 ，AOP思想</p> <p>Spring声明式事务控制底层就是AOP</p></li></ul></blockquote></li> <li><p>声明式事务控制的实现</p> <blockquote><ul><li><p>谁是切点？ ---service层 的transfer方法</p></li> <li><p>谁是增强？  --- 开启事务   --- 提交事务     --回滚  等等</p></li> <li><p>xml配置</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 配置一个平台事务管理器--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource_c3p0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
                    
<span class="token comment">&lt;!-- 通知  事务的增强--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 设置事务的属性信息--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 那些方法被增强--&gt;</span>
        <span class="token comment">&lt;!-- isolation:事务隔离级别  propagation：事务传播行为  read-only：是否只读 timeout: 超时时间2s--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transfer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">isolation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DEFAULT<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">timeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- 所有方法--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select*<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token comment">&lt;!-- 所有以select开头的方法--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">&gt;</span></span>
                    
 <span class="token comment">&lt;!-- 配置事务的aop织入--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.diana.service..*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 专门用来配置 事务的一个命令--&gt;</span>
    <span class="token comment">&lt;!--       &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut=&quot;execution(* com.diana.service..*.*(..))&quot;/&gt;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></blockquote></li></ol> <h4 id="三、基于注解的声明式事务控制"><a href="#三、基于注解的声明式事务控制" class="header-anchor">#</a> 三、基于注解的声明式事务控制</h4> <p>​	开发步骤</p> <ul><li><p>service层注解</p> <ul><li><p>在service方法上加@Transactional(isolation = Isolation.REPEATABLE_READ)，表示要对这个方法进行事务控制</p></li> <li><p>可在类上直接配置@Transactional，表示整个类所有方法的默认事务控制</p></li> <li><p>当方法和类上同时都有事务控制时，以方法上的为主，就近原则</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 声明事务的  service层   注解方式配置</span>
<span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>isolation <span class="token operator">=</span> <span class="token class-name">Isolation</span><span class="token punctuation">.</span><span class="token constant">REPEATABLE_READ</span><span class="token punctuation">)</span> <span class="token comment">//整个类的所有方法的默认事务控制</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountServiceImpl_ZJ</span> <span class="token keyword">implements</span> <span class="token class-name">AccountService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AccountDao</span> accountDao<span class="token punctuation">;</span>

    <span class="token comment">// 这个方法需要进行事务控制,并在里面配置参数</span>
    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>isolation <span class="token operator">=</span> <span class="token class-name">Isolation</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span> <span class="token comment">//就近原则，用这个</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">String</span> outMan<span class="token punctuation">,</span> <span class="token class-name">String</span> inMan<span class="token punctuation">,</span> <span class="token keyword">double</span> money<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//开启事务 -aop 前置增强</span>
        accountDao<span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span>outMan<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>
        accountDao<span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span>inMan<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//提交事务  -aop 后置增强</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>xml中剩余配置</p> <ul><li>把原配置中的 增强方法 声明和  织入过程 用@Transactional（）来代替</li> <li>添加了一个包扫描和事务的注解驱动配置</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- jdbc模板数据 别人的东西 一般在xml中配置--&gt;</span>

<span class="token comment">&lt;!--加载外部配置文件property--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- el表达式 来获取配置文件信息--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource_c3p0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mchange.v2.c3p0.ComboPooledDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 在spring 容器中产生 jdbc模板对象   同时注入数据源--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.core.JdbcTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource_c3p0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>



<span class="token comment">&lt;!-- 配置一个平台事务管理器--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource_c3p0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!-- 事务的注解驱动--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>


<span class="token comment">&lt;!-- 包扫描--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.diana<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>


</code></pre></div></li> <li><p>纯注解开发</p> <ul><li><p>数据源，jdbc模板，平台事务管理器</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//存入数据源</span>
<span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">&quot;dataSource&quot;</span><span class="token punctuation">)</span><span class="token comment">//Spring 会将当前方法的返回值以指定名称存储到Spring容器中</span>
<span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">get_DateSource_c3p0</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//保证容器内部有这个Bean引用类型 ， 只要传入形参  spring会自动找到</span>

    <span class="token class-name">ComboPooledDataSource</span> comboPooledDataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComboPooledDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setDriverClass</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> comboPooledDataSource<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">&quot;jdbcTemplate&quot;</span><span class="token punctuation">)</span> <span class="token comment">//存入jdbc模板</span>
<span class="token keyword">public</span> <span class="token class-name">JdbcTemplate</span> <span class="token function">jdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jdbcTemplate<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span><span class="token comment">//向容器中存入 事务管理器</span>
<span class="token keyword">public</span> <span class="token class-name">PlatformTransactionManager</span> <span class="token function">transactionManager</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">DataSourceTransactionManager</span> transactionManager<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DataSourceTransactionManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    transactionManager<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> transactionManager<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>注解驱动，包扫描</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//开启事务</span>
<span class="token annotation punctuation">@EnableTransactionManagement</span>

<span class="token comment">//&lt;!--配置组件扫描--&gt;  &lt;!--配合注解开发使用--&gt;</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.diana&quot;</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E7%9F%A5%E8%AF%86" title="标签">#知识</a><a href="/tags/?tag=SSM" title="标签">#SSM</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023 07 3</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/fdb88d/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">分片集群搭建</div></a> <a href="/pages/1d17ee/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">SpringMVC-XML开发</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/fdb88d/" class="prev">分片集群搭建</a></span> <span class="next"><a href="/pages/1d17ee/">SpringMVC-XML开发</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/0446de/"><div>
            数据层解决方案
            <!----></div></a> <span class="date">07-03</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/e76fff/"><div>
            第三方技术整合
            <!----></div></a> <span class="date">07-03</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/cd183e/"><div>
            原理篇
            <!----></div></a> <span class="date">07-03</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1693849288@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/diana-devil" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://y.qq.com/n/ryqq/playlist/3202075040" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2023
    <span>by 凉冰 </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><!----><canvas id="vuepress-canvas-cursor"></canvas><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/bgm/G_E_M_ 邓紫棋 - FIND YOU.ogg" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/bgm/GEM.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/bgm/GEM.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>FIND YOU</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>G_E_M_ 邓紫棋</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/assets/js/app.3ee2b30c.js" defer></script><script src="/assets/js/2.fc657b59.js" defer></script><script src="/assets/js/64.86f8647c.js" defer></script><script src="/assets/js/3.e0ec9727.js" defer></script>
  </body>
</html>
